(function(){"use strict";angular.module("app.chart.ctrls",[]).controller("chartCtrl",["$scope",function($scope){return $scope.easypiechart={percent:65,options:{animate:{duration:1e3,enabled:!0},barColor:$scope.color.primary,lineCap:"round",size:180,lineWidth:5}},$scope.easypiechart2={percent:35,options:{animate:{duration:1e3,enabled:!0},barColor:$scope.color.success,lineCap:"round",size:180,lineWidth:10}},$scope.easypiechart3={percent:68,options:{animate:{duration:1e3,enabled:!0},barColor:$scope.color.info,lineCap:"square",size:180,lineWidth:20,scaleLength:0}},$scope.gaugeChart1={data:{maxValue:3e3,animationSpeed:40,val:1375},options:{lines:12,angle:0,lineWidth:.47,pointer:{length:.6,strokeWidth:.03,color:"#000000"},limitMax:"false",strokeColor:"#E0E0E0",generateGradient:!0,percentColors:[[0,$scope.color.success],[1,$scope.color.success]]}},$scope.gaugeChart2={data:{maxValue:3e3,animationSpeed:45,val:1200},options:{lines:12,angle:0,lineWidth:.47,pointer:{length:.6,strokeWidth:.03,color:"#464646"},limitMax:"true",colorStart:"#7ACBEE",colorStop:"#7ACBEE",strokeColor:"#F1F1F1",generateGradient:!0,percentColors:[[0,$scope.color.info],[1,$scope.color.info]]}},$scope.gaugeChart3={data:{maxValue:3e3,animationSpeed:50,val:1100},options:{lines:12,angle:0,lineWidth:.47,pointer:{length:.6,strokeWidth:.03,color:"#464646"},limitMax:"true",colorStart:"#FF7857",colorStop:"#FF7857",strokeColor:"#F1F1F1",generateGradient:!0,percentColors:[[0,$scope.color.danger],[1,$scope.color.danger]]}}}]).controller("morrisChartCtrl",["$scope",function($scope){var barColor,barData,comboColor,comboData,donutColor,donutData,mainColor,mainData,simpleColor,simpleData;return mainData=[{month:"2013-01",xbox:294e3,will:136e3,playstation:244e3},{month:"2013-02",xbox:228e3,will:335e3,playstation:127e3},{month:"2013-03",xbox:199e3,will:159e3,playstation:13e4},{month:"2013-04",xbox:174e3,will:16e4,playstation:82e3},{month:"2013-05",xbox:255e3,will:318e3,playstation:82e3},{month:"2013-06",xbox:298400,will:401800,playstation:98600},{month:"2013-07",xbox:37e4,will:225e3,playstation:159e3},{month:"2013-08",xbox:376700,will:303600,playstation:13e4},{month:"2013-09",xbox:527800,will:301e3,playstation:119400}],mainColor=[$scope.color.infoAlt,$scope.color.danger,$scope.color.success],$scope.main={data:mainData,type:"area",options:{xkey:"month",ykeys:["xbox","will","playstation"],labels:["xbox","will","playstation"],lineColors:mainColor,lineWidth:0,behaveLikeLine:!0,pointSize:0}},simpleData=[{year:"2008",value:20},{year:"2009",value:10},{year:"2010",value:5},{year:"2011",value:5},{year:"2012",value:20},{year:"2013",value:19}],simpleColor=[$scope.color.primary],$scope.simple1={data:simpleData,type:"line",options:{xkey:"year",ykeys:["value"],labels:["Value"],lineWidth:"2",lineColors:simpleColor}},$scope.simple2={data:simpleData,type:"area",options:{xkey:"year",ykeys:["value"],labels:["Value"],lineWidth:"2",lineColors:simpleColor}},comboData=[{month:"1",a:20,b:30},{month:"2",a:30,b:20},{month:"3",a:20,b:10},{month:"4",a:10,b:20},{month:"5",a:20,b:30},{month:"6",a:30,b:20},{month:"7",a:20,b:10},{month:"8",a:10,b:20},{month:"9",a:20,b:30},{month:"10",a:30,b:20},{month:"11",a:20,b:10},{month:"12",a:10,b:20}],comboColor=[$scope.color.success,$scope.color.danger,$scope.color.infoAlt],$scope.combo1={data:comboData,type:"line",options:{xkey:"month",ykeys:["a","b"],labels:["Value A","Value B"],lineWidth:"2",lineColors:comboColor}},$scope.combo2={data:comboData,type:"area",options:{xkey:"month",ykeys:["a","b"],labels:["Value A","Value B"],lineWidth:"2",lineColors:comboColor}},barData=[{year:"2008",a:20,b:16,c:12},{year:"2009",a:10,b:22,c:30},{year:"2010",a:5,b:14,c:20},{year:"2011",a:5,b:12,c:19},{year:"2012",a:20,b:19,c:13},{year:"2013",a:28,b:22,c:20}],barColor=[$scope.color.infoAlt,$scope.color.success,$scope.color.warning],$scope.bar1={data:barData,type:"bar",options:{xkey:"year",ykeys:["a","b","c"],labels:["Value A","Value B","Value C"],barColors:barColor}},$scope.bar2={data:barData,type:"bar",options:{xkey:"year",ykeys:["a","b","c"],labels:["Value A","Value B","Value C"],barColors:barColor,stacked:!0}},donutColor=[$scope.color.success,$scope.color.info,$scope.color.warning,$scope.color.danger],donutData=[{label:"Download Sales",value:12},{label:"In-Store Sales",value:30},{label:"Mail-Order Sales",value:20},{label:"Online Sales",value:19}],$scope.donut1={data:donutData,type:"donut",options:{xkey:"year"}},$scope.donut2={data:donutData,type:"donut",options:{xkey:"year",colors:donutColor}},$scope.donut3={data:donutData,type:"donut",options:{xkey:"year",formatter:"return '$' + y;"}}}]).controller("flotChartCtrl",["$scope",function($scope){var areaChart,barChart,lineChart1;return lineChart1={},lineChart1.data1=[[1,15],[2,20],[3,14],[4,10],[5,10],[6,20],[7,28],[8,26],[9,22]],$scope.line1={},$scope.line1.data=[{data:lineChart1.data1,label:"Trend"}],$scope.line1.options={series:{lines:{show:!0,fill:!0,fillColor:{colors:[{opacity:0},{opacity:.3}]}},points:{show:!0,lineWidth:2,fill:!0,fillColor:"#ffffff",symbol:"circle",radius:5}},colors:[$scope.color.primary,$scope.color.infoAlt],tooltip:!0,tooltipOpts:{defaultTheme:!1},grid:{hoverable:!0,clickable:!0,tickColor:"#f9f9f9",borderWidth:1,borderColor:"#eeeeee"},xaxis:{ticks:[[1,"Jan."],[2,"Feb."],[3,"Mar."],[4,"Apr."],[5,"May"],[6,"June"],[7,"July"],[8,"Aug."],[9,"Sept."],[10,"Oct."],[11,"Nov."],[12,"Dec."]]}},areaChart={},areaChart.data1=[[2007,15],[2008,20],[2009,10],[2010,5],[2011,5],[2012,20],[2013,28]],areaChart.data2=[[2007,15],[2008,16],[2009,22],[2010,14],[2011,12],[2012,19],[2013,22]],$scope.area={},$scope.area.data=[{data:areaChart.data1,label:"Value A",lines:{fill:!0}},{data:areaChart.data2,label:"Value B",points:{show:!0},yaxis:2}],$scope.area.options={series:{lines:{show:!0,fill:!1},points:{show:!0,lineWidth:2,fill:!0,fillColor:"#ffffff",symbol:"circle",radius:5},shadowSize:0},grid:{hoverable:!0,clickable:!0,tickColor:"#f9f9f9",borderWidth:1,borderColor:"#eeeeee"},colors:[$scope.color.success,$scope.color.infoAlt],tooltip:!0,tooltipOpts:{defaultTheme:!1},xaxis:{mode:"time"},yaxes:[{},{position:"right"}]},barChart={},barChart.data1=[[2008,20],[2009,10],[2010,5],[2011,5],[2012,20],[2013,28]],barChart.data2=[[2008,16],[2009,22],[2010,14],[2011,12],[2012,19],[2013,22]],barChart.data3=[[2008,12],[2009,30],[2010,20],[2011,19],[2012,13],[2013,20]],$scope.barChart={},$scope.barChart.data=[{label:"Value A",data:barChart.data1},{label:"Value B",data:barChart.data2},{label:"Value C",data:barChart.data3}],$scope.barChart.options={series:{stack:!0,bars:{show:!0,fill:1,barWidth:.3,align:"center",horizontal:!1,order:1}},grid:{hoverable:!0,borderWidth:1,borderColor:"#eeeeee"},tooltip:!0,tooltipOpts:{defaultTheme:!1},colors:[$scope.color.success,$scope.color.info,$scope.color.warning,$scope.color.danger]},$scope.pieChart={},$scope.pieChart.data=[{label:"Download Sales",data:12},{label:"In-Store Sales",data:30},{label:"Mail-Order Sales",data:20},{label:"Online Sales",data:19}],$scope.pieChart.options={series:{pie:{show:!0}},legend:{show:!0},grid:{hoverable:!0,clickable:!0},colors:[$scope.color.success,$scope.color.info,$scope.color.warning,$scope.color.danger],tooltip:!0,tooltipOpts:{content:"%p.0%, %s",defaultTheme:!1}},$scope.donutChart={},$scope.donutChart.data=[{label:"Download Sales",data:12},{label:"In-Store Sales",data:30},{label:"Mail-Order Sales",data:20},{label:"Online Sales",data:19}],$scope.donutChart.options={series:{pie:{show:!0,innerRadius:.5}},legend:{show:!0},grid:{hoverable:!0,clickable:!0},colors:[$scope.color.success,$scope.color.info,$scope.color.warning,$scope.color.danger],tooltip:!0,tooltipOpts:{content:"%p.0%, %s",defaultTheme:!1}},$scope.donutChart2={},$scope.donutChart2.data=[{label:"Download Sales",data:12},{label:"In-Store Sales",data:30},{label:"Mail-Order Sales",data:20},{label:"Online Sales",data:19},{label:"Direct Sales",data:15}],$scope.donutChart2.options={series:{pie:{show:!0,innerRadius:.45}},legend:{show:!1},grid:{hoverable:!0,clickable:!0},colors:["#1BB7A0","#39B5B9","#52A3BB","#619CC4","#6D90C5"],tooltip:!0,tooltipOpts:{content:"%p.0%, %s",defaultTheme:!0}}}]).controller("sparklineCtrl",["$scope",function($scope){return $scope.demoData1={data:[3,1,2,2,4,6,4,5,2,4,5,3,4,6,4,7],options:{type:"line",lineColor:"#fff",highlightLineColor:"#fff",fillColor:$scope.color.success,spotColor:!1,minSpotColor:!1,maxSpotColor:!1,width:"100%",height:"150px"}},$scope.simpleChart1={data:[3,1,2,3,5,3,4,2],options:{type:"line",lineColor:$scope.color.primary,fillColor:"#fafafa",spotColor:!1,minSpotColor:!1,maxSpotColor:!1}},$scope.simpleChart2={data:[3,1,2,3,5,3,4,2],options:{type:"bar",barColor:$scope.color.primary}},$scope.simpleChart3={data:[3,1,2,3,5,3,4,2],options:{type:"pie",sliceColors:[$scope.color.primary,$scope.color.success,$scope.color.info,$scope.color.infoAlt,$scope.color.warning,$scope.color.danger]}},$scope.tristateChart1={data:[1,2,-3,-5,3,1,-4,2],options:{type:"tristate",posBarColor:$scope.color.success,negBarColor:$scope.color.danger}},$scope.largeChart1={data:[3,1,2,3,5,3,4,2],options:{type:"line",lineColor:$scope.color.info,highlightLineColor:"#fff",fillColor:$scope.color.info,spotColor:!1,minSpotColor:!1,maxSpotColor:!1,width:"100%",height:"150px"}},$scope.largeChart2={data:[3,1,2,3,5,3,4,2],options:{type:"bar",barColor:$scope.color.success,barWidth:10,width:"100%",height:"150px"}},$scope.largeChart3={data:[3,1,2,3,5],options:{type:"pie",sliceColors:[$scope.color.primary,$scope.color.success,$scope.color.info,$scope.color.infoAlt,$scope.color.warning,$scope.color.danger],width:"150px",height:"150px"}}}])}).call(this),function(){"use strict";angular.module("app.chart.directives",[]).directive("gaugeChart",[function(){return{restrict:"A",scope:{data:"=",options:"="},link:function(scope,ele,attrs){var data,gauge,options;return data=scope.data,options=scope.options,gauge=new Gauge(ele[0]).setOptions(options),gauge.maxValue=data.maxValue,gauge.animationSpeed=data.animationSpeed,gauge.set(data.val)}}}]).directive("flotChart",[function(){return{restrict:"A",scope:{data:"=",options:"="},link:function(scope,ele,attrs){var data,options,plot;return data=scope.data,options=scope.options,plot=$.plot(ele[0],data,options)}}}]).directive("flotChartRealtime",[function(){return{restrict:"A",link:function(scope,ele,attrs){var data,getRandomData,plot,totalPoints,update,updateInterval;return data=[],totalPoints=300,getRandomData=function(){var i,prev,res,y;for(data.length>0&&(data=data.slice(1));data.length<totalPoints;)prev=data.length>0?data[data.length-1]:50,y=prev+10*Math.random()-5,0>y?y=0:y>100&&(y=100),data.push(y);for(res=[],i=0;i<data.length;)res.push([i,data[i]]),++i;return res},update=function(){plot.setData([getRandomData()]),plot.draw(),setTimeout(update,updateInterval)},data=[],totalPoints=300,updateInterval=200,plot=$.plot(ele[0],[getRandomData()],{series:{lines:{show:!0,fill:!0},shadowSize:0},yaxis:{min:0,max:100},xaxis:{show:!1},grid:{hoverable:!0,borderWidth:1,borderColor:"#eeeeee"},colors:["#70b1cf"]}),update()}}}]).directive("sparkline",[function(){return{restrict:"A",scope:{data:"=",options:"="},link:function(scope,ele,attrs){var data,options,sparkResize,sparklineDraw;return data=scope.data,options=scope.options,sparkResize=void 0,sparklineDraw=function(){return ele.sparkline(data,options)},$(window).resize(function(e){return clearTimeout(sparkResize),sparkResize=setTimeout(sparklineDraw,200)}),sparklineDraw()}}}]).directive("morrisChart",[function(){return{restrict:"A",scope:{data:"=",type:"=",options:"="},link:function(scope,ele,attrs){var data,func,options,type;switch(data=scope.data,type=scope.type){case"line":return options=angular.extend({element:ele[0],data:data},scope.options),new Morris.Line(options);case"area":return options=angular.extend({element:ele[0],data:data},scope.options),new Morris.Area(options);case"bar":return options=angular.extend({element:ele[0],data:data},scope.options),new Morris.Bar(options);case"donut":return options=angular.extend({element:ele[0],data:data},scope.options),options.formatter&&(func=new Function("y","data",options.formatter),options.formatter=func),new Morris.Donut(options)}}}}])}.call(this),function(){"use strict";angular.module("app.clients",[]).controller("clientCtrl",["$scope","$filter","fetchTabData","fakeData","$location","clientService","fetchHandbook","$routeParams","$route","config","Images","php","ClientAPI","Companies","Clients","handbookService","$timeout",function($scope,$filter,fetchTabData,fakeData,$location,clientService,fetchHandbook,$routeParams,$route,config,Images,php,ClientAPI,Companies,Clients,handbookService,$timeout){var _URL_clients,_getClients;return _URL_clients={list:config.path.baseURL+config.path.clients},_getClients=function(limit,goPage){return Clients.get(_URL_clients.list+"?limit="+limit+"&page="+goPage).then(function(res){200===res.status&&"object"==typeof res&&($scope.clients=res.data,$scope.clients_list=res.data._embedded.items)},function(error){})},$scope.numPerPageOpt=[5,10,20,30],$scope.numPerPage=$scope.numPerPageOpt[1],$scope.currentPage=1,$scope.filteredUsers=[],$scope.currentPageUsers=[],$scope.onNPPChange=function(){return _getClients($scope.numPerPage,$scope.currentPage)},$scope.gotoPage=function(page){return _getClients($scope.numPerPage,$scope.currentPage)},_getClients($scope.numPerPage,$scope.currentPage),$scope.showPreview=!1,$scope.isForward=!1,$scope.isTerm=!1,$scope.isCode=!1,$scope.isForward=!1,$scope.isOurCpny=!1,$scope.isCreateNew=!1,$scope.fnCreateNew=function(){return $scope.isCreateNew=!$scope.isCreateNew},$scope.isEditHandbook=!1,$scope.fnEditHandbook=function(){return $scope.isEditHandbook=!$scope.isEditHandbook},$scope.isEditClients=!1,$scope.isCreateHandbook=!1,$scope.createNewVersion=function(){return $scope.isCreateHandbook=!$scope.isCreateHandbook},$scope.changePublished=function(handbook,clientId){var r,updateData;return(r=confirm("Do you want to change this Handbook ?"))?(handbook.locale="en-us",updateData={handbook:{version:handbook.version,title:handbook.translations[handbook.locale].title,year:handbook.year,description:handbook.translations[handbook.locale].description,organisation:clientId,locale:handbook.locale,enabled:handbook.enabled}},handbookService.update({org_id:clientId,hand_id:handbook.id},updateData,function(res){return $scope.infoUpdated="Update Success"},function(error){return $scope.infoUpdated=error.status+": Error, refresh & try again !"})):void 0},$scope.ClientPage={tabUrls:{}},$routeParams.clientId&&clientService.get({org_id:$routeParams.clientId},function(data,getResponseHeaders){return data._links.handbooks?fetchHandbook.get(data._links.handbooks.href).then(function(res){return"object"==typeof res.data._embedded&&res.data._embedded.items?($scope.handbooks=res.data._embedded.items,angular.forEach($scope.handbooks,function(item,i){return Clients.get(item._links.translations.href).then(function(res){200===res.status&&"object"==typeof res&&($scope.handbooks[i].translations=res.data)},function(error){})})):void($scope.isCreateHandbook=!0)}):$scope.isCreateHandbook=!0,$scope.clientDetail=data,"object"==typeof data._links.logo&&data._links.logo.href?Images.get(data._links.logo.href).then(function(res){var logo_id_arr;200===res.status&&"object"==typeof res&&(logo_id_arr=php.explode("/media/",data._links.logo.href),$scope.urlUpload=$scope.clientDetail._links["logo.post"].href,$scope.clientDetail.logo=res.data,"object"==typeof res.data._links.url&&res.data._links.url.href&&Images.get(data._links.logo.href+"/url").then(function(url){return 200===url.status&&"object"==typeof url?$scope.clientDetail.logo_url=url.data.url:void 0},function(error){return void 0}))},function(error){return void 0}):$scope.urlUpload=$scope.clientDetail._links["logo.post"].href,"object"==typeof data._links.banners&&data._links.banners.href?Images.get(data._links.banners.href).then(function(res){200===res.status&&"object"==typeof res&&($scope.urlUploadBanner=$scope.clientDetail._links["banners.post"].href,$scope.clientDetail.banners=[],res.data._embedded.items.length>0&&angular.forEach(res.data._embedded.items,function(itm){var b;return b=itm,"object"==typeof b._links.url&&b._links.url.href?Images.get(config.path.baseURL+b._links.url.href).then(function(bn){return 200===bn.status||"object"==typeof bn?(b.banner_url=bn.data.url,$scope.clientDetail.banners.push(b)):void 0},function(error){return void 0}):void 0}))},function(error){return void 0}):$scope.urlUploadBanner=$scope.clientDetail._links["banners.post"].href,$scope.ClientPage.tabUrls={info:"#/clients/"+data.id+"/info",user:"#/clients/"+data.id+"/user",handbooks:"#/clients/"+data.id+"/handbooks",policies:"#/clients/"+data.id+"/policies",insurance:"#/clients/"+data.id+"/insurance",healthcare:"#/clients/"+data.id+"/healthcare",imerchant:"#/clients/"+data.id+"/imerchant",notifications:"#/clients/"+data.id+"/notifications"}}),$scope.isEditUser=!1,$scope.fnEditUser=function(){return $scope.isEditUser=!$scope.isEditUser},$scope.isNewUser=!1,$scope.isUserUpload=!1,$scope.isDetailUpload=!1,$scope.enabClient=function(client,i){var banners_id_arr,logo_id_arr,r,sm_client_data;return(r=confirm("Do you want to change this company?"))?(logo_id_arr=null,client._links.logo&&(logo_id_arr=php.explode("/media/",client._links.logo.href),logo_id_arr=logo_id_arr[1]),sm_client_data={organisation:{admin_user:null,parent:null,name:client.name?client.name:null,code:client.code?client.code:null,reg_no:client.reg_no?client.reg_no:null,head_office_no:client.head_office_no?client.head_office_no:null,billingAddress:client.billing_address?client.billing_address:null,office_address:client.office_address?client.office_address:null,reservation_email:client.reservation_email?client.reservation_email:null,user_contact_no:client.user_contact_no?client.user_contact_no:null,client_since:client.client_since?client.client_since:null,office_hours:client.office_hours?client.office_hours:null,redemption_password:client.redemption_password?client.redemption_password:null,about_company:client.about_company?client.about_company:null,enabled:!client.enabled,logo:logo_id_arr}},banners_id_arr=null,client._links.banners?Images.get(client._links.banners.href).then(function(res){return 200===res.status&&"object"==typeof res?(banners_id_arr=[],angular.forEach(res.data._embedded.items,function(banner){return banners_id_arr.push(banner.id)}),sm_client_data.organisation.banners=banners_id_arr,clientService.update({org_id:client.id},sm_client_data,function(res){return $scope.clients_list[i].enabled=sm_client_data.organisation.enabled},function(error){return alert(error.status+" : Try later after refreshing!")})):void 0}):clientService.update({org_id:client.id},sm_client_data,function(res){return $scope.clients_list[i].enabled=sm_client_data.organisation.enabled},function(error){return alert(error.status+" : Try later after refreshing!")})):void 0},$scope.clients_edit=!1,$scope.editClient=function(clients_edit){return $scope.isDisable=!$scope.isDisable,$scope.clients_edit=!clients_edit,$scope.clients_edit===!1&&$scope.clientDetail.id?$scope.updateClient("",null):void 0},$scope.updateClient=function(task,obj){var banner_id,logo_id,sm_client_data;return $scope.clientDetail.redemption_password&&4!==$scope.clientDetail.redemption_password.length?void alert("Please entry 4 chars in Redemption password"):(sm_client_data={organisation:{admin_user:null,parent:null,name:$scope.clientDetail.name?$scope.clientDetail.name:null,code:$scope.clientDetail.code?$scope.clientDetail.code:null,reg_no:$scope.clientDetail.reg_no?$scope.clientDetail.reg_no:null,head_office_no:$scope.clientDetail.head_office_no?$scope.clientDetail.head_office_no:null,billingAddress:$scope.clientDetail.billing_address?$scope.clientDetail.billing_address:null,office_address:$scope.clientDetail.office_address?$scope.clientDetail.office_address:null,reservation_email:$scope.clientDetail.reservation_email?$scope.clientDetail.reservation_email:null,user_contact_no:$scope.clientDetail.user_contact_no?$scope.clientDetail.user_contact_no:null,client_since:$scope.clientDetail.client_since?$scope.clientDetail.client_since:null,office_hours:$scope.clientDetail.office_hours?$scope.clientDetail.office_hours:null,redemption_password:$scope.clientDetail.redemption_password?$scope.clientDetail.redemption_password:null,about_company:$scope.clientDetail.about_company?$scope.clientDetail.about_company:null,enabled:$scope.clientDetail.enabled||null}},logo_id=null,"delete_logo"!==task&&(logo_id=$scope.$$childTail.uploadresponse?$scope.$$childTail.uploadresponse.logo_id:$scope.clientDetail.logo?$scope.clientDetail.logo.id:null),sm_client_data.organisation.logo=logo_id,banner_id=[],$scope.clientDetail.banners&&$scope.clientDetail.banners.length>0?(angular.forEach($scope.clientDetail.banners,function(bn){return"delete_banner"!==task||bn.id!==obj.id?banner_id.push(bn.id):void 0}),$scope.$$childTail.uploadbanner&&banner_id.push($scope.$$childTail.uploadbanner.logo_id)):banner_id=$scope.$$childTail.uploadbanner?$scope.$$childTail.uploadbanner.logo_id:null,sm_client_data.organisation.banners=banner_id,clientService.update({org_id:$scope.clientDetail.id},sm_client_data,function(res){return"object"==typeof res.organisation?"delete_logo"===task?Images["delete"]($scope.clientDetail._links.logo.href).then(function(res){204===res.status&&location.reload()},function(error){return 500===error.status?$scope.clientDetail.logo=null:void 0}):"delete_banner"===task&&"object"==typeof obj?Images["delete"](config.path.baseURL+obj._links.self.href).then(function(res){204===res.status&&$timeout(function(){return location.reload()},300)},function(error){return 500===error.status?$scope.clientDetail.logo=null:void 0}):void 0:void 0},function(error){return alert(error.status+" : Try later and new company code")}))},$scope.isActive=function(path){return $location.path().search(path)>=0?"active":void 0},$scope.deleteHandbook=function(handbook){var r;return r=confirm('Do you want to delete "'+handbook.title+'"?'),r===!0?fetchHandbook["delete"](handbook._links.self.href).then(function(res){return $route.reload()}):void 0},$scope.urlUpload=config.path.baseURL+config.path.upload+"image/media",$scope.uploadButtonLabel="Upload file",$scope.delLogo=function(){return"object"==typeof $scope.clientDetail._links.logo&&$scope.clientDetail._links.logo.href?$scope.updateClient("delete_logo",null):void 0},$scope.delBanner=function(banner){return"object"==typeof $scope.clientDetail._links.banners&&$scope.clientDetail._links.banners.href?$scope.updateClient("delete_banner",banner):void 0},$scope.deleteClient=function(client){var r;r=confirm('Do you want to delete this client "'+client.name+'"?'),r===!0&&ClientAPI.go("DELETE",client._links.self.href).then(function(res){return location.reload(),!0},function(error){return alert(error.status+" : Try later")})},$scope.co=null,$scope.rule={validMail:/^[-a-z0-9~!$%^&*_=+}{\'?]+(\.[-a-z0-9~!$%^&*_=+}{\'?]+)*@([a-z0-9_][-a-z0-9_]*(\.[-a-z0-9_]+)*\.(aero|arpa|biz|com|coop|edu|gov|info|int|mil|museum|name|net|org|pro|travel|mobi|[a-z][a-z])|([0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}))(:[0-9]{1,5})?$/i,noSpace:/[^\s\\]/},$scope.submitNewClient=function(){var co_data;return angular.forEach($scope.frm_create_clients.$error.required,function(field){return field.$dirty=!0}),$scope.frm_create_clients.$error.required.length?!1:($scope.co.enabled=!0,co_data={organisation:$scope.co},void Companies.post(config.path.baseURL+config.path.clients,co_data).then(function(res){return"object"==typeof res&&201===res.status||alert(error.status+" : Try later"),location.reload(),!0},function(error){return alert(error.status+" : Try later and new company code")}))}}])}.call(this),function(){"use strict";angular.module("app.client.services",[]).factory("Clients",["$http","$q","$resource",function($http,$q,$resource){return{get:function(url){var d;return d=$q.defer(),$http({method:"GET",url:url}).then(function(res){d.resolve(res)},function(error){d.reject(error)}),d.promise},post:function(url,data){var d;return d=$q.defer(),$http({method:"POST",url:url,data:data}).then(function(res){d.resolve(res)},function(error){d.reject(error)}),d.promise},put:function(url,data){var d;return d=$q.defer(),$http({method:"PUT",url:url,data:data}).then(function(res){d.resolve(res)},function(error){d.reject(error)}),d.promise},"delete":function(url){var d;return d=$q.defer(),$http({method:"DELETE",url:url}).then(function(res){d.resolve(res)},function(error){d.reject(error)}),d.promise}}}]).factory("clientService",["$resource","config",function($resource,config){var service;return service=$resource(config.path.baseURL+config.path.client,{},{query:{method:"GET",action:config.path.baseURL+config.path.clients},update:{method:"PUT",action:config.path.baseURL+config.path.client}})}]).factory("fetchTabData",["$http","$q","$resource",function($http,$q,$resource){return{tabFetchDataByIndex:function(tabConfig){var d;return d=$q.defer(),tabConfig||"object"==typeof tabConfig?($http({method:"GET",url:tabConfig.baseUrl}).then(function(res){return d.resolve(res)},function(error){return d.reject(error)}),d.promise):void 0},fetchMainData:function(tabConfig){var Clients,d;return d=$q.defer(),Clients=$resource("https://api.sg-benefits.com/organisations",{},{get:{method:"GET",headers:{"x-username":"kenneth.yap@ap.magenta-consulting.com","x-password":"p@ssword"}}}),Clients.get({},function(data,getResponseHeaders){return data?d.resolve(data):d.reject(error)}),d.promise},fetchClient:function(id){var Client,d;return d=$q.defer(),Client=$resource("https://api.sg-benefits.com/organisations/"+id,{},{get:{method:"GET",headers:{"x-username":"kenneth.yap@ap.magenta-consulting.com","x-password":"p@ssword"}}}),Client.get({},function(data,getResponseHeaders){return data?d.resolve(data):d.reject(error)}),d.promise},fetchUrl:function(linkURL){var Resource,d;return d=$q.defer(),Resource=$resource(linkURL,{},{get:{method:"GET",headers:{"x-username":"kenneth.yap@ap.magenta-consulting.com","x-password":"p@ssword"}}}),Resource.get({},function(data,getResponseHeaders){return data?d.resolve(data):d.reject(error)}),d.promise}}}]).factory("Companies",["$http","$q","$resource",function($http,$q,$resource){return{get:function(url){var d;return d=$q.defer(),$http({method:"GET",url:url}).then(function(res){d.resolve(res)},function(error){d.reject(error)}),d.promise},post:function(url,data){var d;return d=$q.defer(),$http({method:"POST",url:url,data:data}).then(function(res){d.resolve(res)},function(error){d.reject(error)}),d.promise}}}]).factory("ClientAPI",["$http","$q","$resource",function($http,$q,$resource){return{go:function(method,url){var d;return d=$q.defer(),$http({method:method,url:url}).then(function(res){d.resolve(res)},function(error){d.reject(error)}),d.promise}}}]).factory("Images",["$http","$q","$resource",function($http,$q,$resource){return{get:function(url){var d;return d=$q.defer(),$http({method:"GET",url:url}).then(function(res){d.resolve(res)},function(error){d.reject(error)}),d.promise},"delete":function(url){var d;return d=$q.defer(),$http({method:"DELETE",url:url}).then(function(res){d.resolve(res)},function(error){d.reject(error)}),d.promise},update:function(url,data){var d;return d=$q.defer(),$http({method:"POST",url:url,data:data}).then(function(res){d.resolve(res)},function(error){d.reject(error)}),d.promise}}}]).factory("fakeData",["$http","$q",function($http,$q){return{clients_data:{clients_list:[{id:1,company:"Magenta Pte Ltd",status:"live",industry:"HR Advisory",user:35,est_savings:"$2,500",cs:"Astrid"}],clients_tab_company:{id:1,company_name:"Magenta Consulting Pte Ltd",company_no:"199452264G",address:"8 Burn Road",unit_number:"#12-11",building_name:"Trivex",postal_code:"369977",business_type:"HR Consultancy, Corporate Services",office_number:"65587895",adm_email:"Kenneth@magenta-consultancy.com",adm_no:"96854457",client_since:"29 Jan 2014",package_type:"Basic - $10/User/Month",about_company:"Magenta is the colour of the highest order, connected with spirituality, mediation, and letting go. It is an agent for change, for the clearing out of old attitudes and obsessions, and for making a break with the past. Consistent with the qualities associated with the colour ‘Magenta’, the Human Resource Consulting Services of Magenta Consulting Services is delivered in the highest order possible. We are your agent for change – for the enhancement of the present and a lead into the future – via our innovative approach to the human capital solutions we offer.kdf",logo:"images/logo-demo.png"},clients_tab_user_list:[{id:1,data_add:"29 June 2015 3:45pm",firstname:"Astrid",lastname:"Tan",email:"a.magenta@magenta.com",contact_no:"9787264",veri_code:"Awre5442d",employ_cls:"Management"}],clients_tab_user_uploads:[{id:1,firstname:"Vera",lastname:"Tan",email:"a.magenta@magenta.com",contact_no:"9879878",employ_cls:"Executive",funct:"Sales",birthday:"25/03/81",nric:"Null"}],clients_user_detail:{id:1,firstname:"Joan",lastname:"Yan",email:"Joan.yan@mint.com",contact:"998554565",employ_cls:"Workmen","function":"Waitress",birthday:"03 May 1990",nric:"13 Jun 2016",date_add:"12 Jun 2015",date_end:"13 Jun 2016",app_status:"De-activated",veri_code:"XXEOOKm1923",redemptions:"25",est_saving:"s$600",card_id:"3325-44556-45"},clients_user_redemptions_list:[{id:1,date:"4 Sep 2015 3:45pm",merchant:"Long Long ago far away bar",item:"Happy Hour",location:"99 Hong Kong Road",category:"F&B",est_save:"s$20",ref:"244eefee"}],clients_user_upload_detail:[{id:1,firstname:"Vera",lastname:"Tan",email:"a.magenta@magenta.com",contact_no:"9879878",veri_code:"E#vfr4f5",employ_cls:"Executive",funct:"Sales",birthday:"25/03/81",nric:"Null"}],clients_tab_handbook_list:[{id:"chk_hb_1",version:"1.4.1",last_modified:"12 Jun 2015",language:"English","public":!0}],clients_tab_handbook_info:{id:1,company_name:"Magenta Consulting Pte Ltd",company_no:"199452264G",address:"8 Burn Road",unit_number:"#12-11",building_name:"Trivex",postal_code:"369977",handbook_ttl:"Magenta Consulting Employee Handbook",version:"1.4",year:"2015",language:"English"},clients_tab_handbook_general:{id:1,logo:"../images/logo-demo.png",content:"We have specially prepared this Handbook to explain and help you better understand Magenta’s Human Resource policies, compensation and benefits programs, as well as our corporate rules and regulations."},clients_tab_handbook_section:{id:1,section_title:"Forward",status:"Active/Disabled",section_no:1,content:"Can be left blank if nothing to be written in this section"}}}}]).directive("uploadFile",["Upload",function(Upload){var controller,link;return controller=["$scope","$http","$timeout",function($scope,$http,$timeout){var defaultLabel;return defaultLabel=$scope.label.toString(),$scope.fileName="",$scope.progressPercentage=0,$scope.uniqueID=(new Date).getTime(),$scope.$watch("file",function(nv){return nv?Upload.upload({method:"POST",url:$scope.uploadUrl,data:{binaryContent:nv},headers:{"x-username":"kenneth.yap@ap.magenta-consulting.com","x-password":"p@ssword","Content-Type":""!==nv.type?nv.type:"application/octet-stream"}}).then(function(res){return $scope.result=res.data,$scope.result.logo_id=res.headers().location.split("/")[2],$scope.progressPercentage=0},function(error){return $scope.progressPercentage=0,$scope.label="Error : "+error.status,$scope.result=null,$timeout(function(){return $scope.label=defaultLabel},3e3)},function(e){return void($scope.progressPercentage=parseInt(100*e.loaded/e.total))}):void 0})}],link=function(scope,element,attribute){var inputFile;return inputFile=$(element.find("input")),inputFile.on("change",function(e){return this.files&&this.files.length>1?scope.fileName=(this.getAttribute("data-multiple-caption")||"").replace("{count}",this.files.length):scope.fileName=e.target.value.split("\\").pop(),scope.fileName?scope.label=scope.fileName:scope.label="Upload New Image"})},{restrict:"E",scope:{uploadUrl:"=uploadUrl",
color:"=ngProgressColor",label:"=ngLabel",result:"=ngUploadresponse"},templateUrl:"views/directives/uploadFile.html",controller:controller,link:link}}])}.call(this),function(){"use strict";angular.module("app.contacts",[]).controller("ContactCtrl",["$scope","$filter","fetchTabData","fakeData","$location","$routeParams","ContactService","fetchContact","SearchUsers","fetchUsers","config","$q","$modal",function($scope,$filter,fetchTabData,fakeData,$location,$routeParams,ContactService,fetchContact,SearchUsers,fetchUsers,config,$q,$modal){var _URL;_URL={list:config.path.baseURL+config.path.contacts.replace(":org_id",$routeParams.clientId)+"?search=position.handbookContact:1,position.enabled:1"},$scope.loadContactList=function(){return fetchContact.get(_URL.list).then(function(res){res.data._embedded.items.length&&($scope.contacts=[],angular.forEach(res.data._embedded.items,function(item,i){return $scope.contacts[i]={},function(itemInstance){return fetchContact.get(itemInstance._links.employee.href).then(function(res){return $scope.contacts[i].position=itemInstance,$scope.contacts[i].user=res.data,$scope.contacts[i].alphabet=res.data.first_name?res.data.first_name.charAt(0).toLowerCase():res.data.username.charAt(0).toLowerCase(),fetchContact.get(itemInstance._links.tags.href).then(function(res){return $scope.contacts[i].tags=res.data})})}(item)}))})},$routeParams.clientId&&$scope.loadContactList(),$scope.contact={email:"",title:""},$scope.srch_users={email:0},$scope.searchMail=function(term){var d,q,results;return d=$q.defer(),q=term.toLowerCase().trim(),results={},fetchUsers.get(config.path.baseURL+config.path.users+"?search=user.email:%"+q+"%").then(function(res){var i,item,users,_i,_ref;if(res.data._embedded){for($scope.srch_users={},users=res.data._embedded.items,i=_i=0,_ref=users.length;_ref>=0?_ref>_i:_i>_ref;i=_ref>=0?++_i:--_i)item=users[i],results[item.email]=item.id;return $scope.srch_users=results,d.resolve(results)}},function(){return d.resolve(results)}),d.promise},$scope.selectedUser=null,$scope.createContact=function(){var newContact;return angular.forEach($scope.frm_contact.$error.required,function(field){return field.$dirty=!0}),$scope.frm_contact.$error.required.length?!1:(newContact={position:{title:$scope.contact.title,employee:$scope.srch_users[$scope.contact.email],enabled:!0,employer:$routeParams.clientId,handbook_contact:!0}},ContactService.save({org_id:$routeParams.clientId},newContact,function(res){return $scope.loadContactList()}))},$scope.editContact=function(contact){var modalInstance;return $scope.editcontact=contact,modalInstance=$modal.open({templateUrl:"views/handbooks/contact_form.html",controller:"ContactFormCtrl",resolve:{contact:function(){return contact}},scope:$scope})},$scope.deleteContact=function(contact){var r;return r=confirm('Do you want to delete "'+contact.position.title+'"?'),r===!0?fetchContact["delete"](contact.position._links.self.href).then(function(res){return $scope.loadContactList()}):void 0},$scope.totalSelected=0,$scope.contactSelect=function(){var i,item,_ref,_results;$scope.totalSelected=0,_ref=$scope.contacts,_results=[];for(i in _ref)item=_ref[i],item.checked===!0?_results.push($scope.totalSelected++):_results.push(void 0);return _results},$scope.deleteSelectedContacts=function(){var count,i,item,r,_ref,_results;if(r=confirm("Do you want to delete all selected contacts ?"),count=0,r===!0){_ref=$scope.contacts,_results=[];for(i in _ref)item=_ref[i],item.checked===!0?_results.push(fetchContact["delete"](item.position._links.self.href).then(function(res){return count++,count===$scope.totalSelected?$scope.loadContactList():void 0})):_results.push(void 0);return _results}}}]).controller("ContactFormCtrl",["$scope","$routeParams","fetchContact","config","$modalInstance","fetchUsers","$q","contact",function($scope,$routeParams,fetchContact,config,$modalInstance,fetchUsers,$q,contact){return $scope.contact=contact,$scope.srch_users={email:0},$scope.searchMail=function(term){var d,q,results;return d=$q.defer(),q=term.toLowerCase().trim(),results={},fetchUsers.get(config.path.baseURL+config.path.users+"?search=user.email:%"+q+"%").then(function(res){var i,item,users,_i,_ref;if(res.data._embedded){for($scope.srch_users={},users=res.data._embedded.items,i=_i=0,_ref=users.length;_ref>=0?_ref>_i:_i>_ref;i=_ref>=0?++_i:--_i)item=users[i],results[item.email]=item.id;return $scope.srch_users=results,d.resolve(results)}},function(){return d.resolve(results)}),d.promise},$scope.save=function(){var updateContact;return updateContact={position:{title:contact.position.title,employee:$scope.srch_users[$scope.contact.user.email],enabled:!0,employer:$routeParams.clientId,handbook_contact:!0}},fetchContact.update(contact.position._links.self.href,updateContact).then(function(res){return $scope.loadContactList(),$modalInstance.close()},function(error){return alert(error.status+" : Wrong email! Try again.")})},$scope.cancel=function(){return $modalInstance.dismiss("cancel")}}]).directive("keyboardPoster",function($parse,$timeout){var DELAY_TIME_BEFORE_POSTING;return DELAY_TIME_BEFORE_POSTING=1e3,function(scope,elem,attrs){var currentTimeout,element;element=angular.element(elem)[0],currentTimeout=null,element.oninput=function(){var model,poster;model=$parse(attrs.postFunction),poster=model(scope),currentTimeout&&$timeout.cancel(currentTimeout),currentTimeout=$timeout(function(){poster(angular.element(element).val())},DELAY_TIME_BEFORE_POSTING)}}})}.call(this),function(){"use strict";angular.module("app.contacts.services",[]).factory("ContactService",function($resource,config){var service;return service=$resource(config.path.baseURL+config.path.contacts,{},{query:{method:"GET",action:config.path.baseURL+config.path.contacts,isArray:!0},update:{method:"PUT",action:config.path.contact},save:{method:"POST",action:config.path.baseURL+config.path.contacts}})}).factory("fetchContact",["$http","$q","$resource",function($http,$q,$resource){return{get:function(url){var d;return d=$q.defer(),$http({method:"GET",url:url}).then(function(res){d.resolve(res)},function(error){d.reject(error)}),d.promise},update:function(url,data){var d;return d=$q.defer(),$http({method:"PUT",url:url,data:data}).then(function(res){d.resolve(res)},function(error){d.reject(error)}),d.promise},"delete":function(url){var d;return d=$q.defer(),$http({method:"DELETE",url:url}).then(function(res){d.resolve(res)},function(error){d.reject(error)}),d.promise}}}]).factory("fetchUsers",["$http","$q","$resource",function($http,$q,$resource){return{get:function(url){var d;return d=$q.defer(),$http({method:"GET",url:url}).then(function(res){d.resolve(res)},function(error){d.reject(error)}),d.promise}}}]).factory("SearchUsers",function($resource,config){var service;return service=$resource(config.path.baseURL+config.path.users,{},{query:{method:"GET",action:config.path.baseURL+config.path.users},update:{method:"PUT"}})})}.call(this),function(){"use strict";angular.module("app.handbooks",[]).controller("HandbookCtrl",["$scope","$routeParams","fetchHandbook","handbookService","clientService","sectionService","$location","$timeout",function($scope,$routeParams,fetchHandbook,handbookService,clientService,sectionService,$location,$timeout){return $scope.clientId=$routeParams.clientId,$scope.handbookId=$routeParams.handbookId,$scope.ClientPage={tabUrls:{}},clientService.get({org_id:$scope.clientId},function(data,getResponseHeaders){return $scope.clientDetail=data,$scope.ClientPage.tabUrls={info:"#/clients/"+data.id+"/info",user:"#/clients/"+data.id+"/user",handbooks:"#/clients/"+data.id+"/handbooks",policies:"#/clients/"+data.id+"/policies",insurance:"#/clients/"+data.id+"/insurance",healthcare:"#/clients/"+data.id+"/healthcare",imerchant:"#/clients/"+data.id+"/imerchant",notifications:"#/clients/"+data.id+"/notifications"}}),handbookService.get({org_id:$scope.clientId,hand_id:$scope.handbookId},function(data,getResponseHeaders){return $scope.handbook=data,$scope.handbook.locale="en-us",fetchHandbook.get(data._links.translations.href).then(function(res){200===res.status&&"object"==typeof res&&($scope.handbook.translations=res.data)},function(error){})}),$scope.isActive=function(href){var path;return path=$location.path(),0===path.indexOf(href)?"active":void 0},$scope.submitHandbookInfo=function(){var updateData;return updateData={handbook:{version:$scope.handbook.version,title:$scope.handbook.translations[$scope.handbook.locale].title,year:$scope.handbook.year,description:$scope.handbook.translations[$scope.handbook.locale].description,organisation:$scope.clientId,locale:$scope.handbook.locale,enabled:$scope.handbook.enabled}},updateData.handbook.organisation=$scope.clientId,handbookService.update({org_id:$scope.clientId,hand_id:$scope.handbookId},updateData,function(res){return $scope.generalUpdated="Update Success",$timeout(function(){return $scope.generalUpdated=null},1e3)},function(error){return $scope.generalUpdated=error.status+": Error, refresh & try again !"})}}])}.call(this),function(){"use strict";angular.module("app.handbook_info",[]).controller("HandbookInfoCtrl",["$scope","$routeParams","fetchHandbook","handbookService","clientService","sectionService","$location","$timeout",function($scope,$routeParams,fetchHandbook,handbookService,clientService,sectionService,$location,$timeout){return $scope.clientId=$routeParams.clientId,$scope.handbookId=$routeParams.handbookId,$scope.isNewHandBook=!1,$scope.isCreateHandbook=!1,$scope.handbook={},$scope.handbook.locale="en-us",clientService.get({org_id:$scope.clientId},function(data,getResponseHeaders){return $scope.clientDetail=data}),$scope.isCreateHandbook===!1&&handbookService.get({org_id:$scope.clientId,hand_id:$scope.handbookId},function(data,getResponseHeaders){return $scope.handbook=data,$scope.handbook.locale="en-us",fetchHandbook.get(data._links.translations.href).then(function(res){200===res.status&&"object"==typeof res&&($scope.handbook.translations=res.data)},function(error){})}),$scope.isActive=function(href){var path;return path=$location.path(),0===path.indexOf(href)?"active":void 0},$scope.submitHandbookInfo=function(){var updateData;return angular.forEach($scope.frm_crt_handbook.$error.required,function(field){return field.$dirty=!0}),$scope.frm_crt_handbook.$error.required.length?!1:(updateData={handbook:{version:$scope.handbook.version,title:$scope.handbook.translations[$scope.handbook.locale].title,year:$scope.handbook.year,description:$scope.handbook.translations[$scope.handbook.locale].description,organisation:$scope.clientId,locale:$scope.handbook.locale,enabled:$scope.handbook.enabled}},handbookService.update({org_id:$scope.clientId,hand_id:$scope.handbookId},updateData,function(res){return $scope.infoUpdated="Update Success",$timeout(function(){return $scope.infoUpdated=null},1e3)},function(error){return $scope.infoUpdated=error.status+": Error, refresh & try again !"}))},$scope.submitCreateHandbook=function(){var newData;return angular.forEach($scope.frm_crt_handbook.$error.required,function(field){return field.$dirty=!0}),$scope.frm_crt_handbook.$error.required.length?!1:(newData={handbook:{version:$scope.handbook.version,title:$scope.handbook.title,year:$scope.handbook.year,description:$scope.handbook.description,organisation:$scope.clientId,locale:$scope.handbook.locale,active:$scope.handbook.active}},handbookService.save({org_id:$scope.clientId},newData,function(res){return $scope.infoUpdated="Created New",$timeout(function(){return $scope.infoUpdated=null,location.reload()},500)},function(error){return $scope.infoUpdated=error.status+": Error, refresh & try again !"}))}}])}.call(this),function(){"use strict";angular.module("app.handbook_section",[]).controller("HandbookSectionCtrl",["$scope","$routeParams","handbookService","clientService","sectionService","$location","$timeout","fetchHandbook","config",function($scope,$routeParams,handbookService,clientService,sectionService,$location,$timeout,fetchHandbook,config){var orderSections,sectionCompare,translateSection,ungroupSection,_URL_sections,_loadAllParent;return orderSections=function(items){var i,item,j,treeList,_i,_j,_ref,_ref1;for(treeList=[],i=_i=0,_ref=items.length-1;_ref>=0?_ref>=_i:_i>=_ref;i=_ref>=0?++_i:--_i)items[i]._links.parent||(items[i].children=[],treeList.push(items[i]));for(j in treeList)for(item=treeList[j],i=_j=0,_ref1=items.length-1;_ref1>=0?_ref1>=_j:_j>=_ref1;i=_ref1>=0?++_j:--_j)items[i]._links.parent&&treeList[j]._links.self.href===items[i]._links.parent.href&&treeList[j].children.push(items[i]);for(j in treeList)item=treeList[j],treeList[j].children=treeList[j].children.sort(sectionCompare);return treeList.sort(sectionCompare),treeList},ungroupSection=function(items){var child,item,j,k,returnList,_ref;returnList=[];for(j in items)if(item=items[j],item.no=parseInt(j)+1,returnList.push(item),item.children.length>0){_ref=item.children;for(k in _ref)child=_ref[k],child.parent_no=item.no,child.no=parseInt(k)+1,returnList.push(child)}return returnList},translateSection=function(item){var newItem;return newItem=item,fetchHandbook.get(item._links.translations.href).then(function(res){200===res.status&&"object"==typeof res&&(newItem.translations=res.data)},function(error){}),newItem},sectionCompare=function(a,b){return a.version<b.version?-1:a.version>b.version?1:0},_URL_sections={list:config.path.baseURL+config.path.sections.replace(":org_id",$scope.clientId).replace(":hand_id",$scope.handbookId)},$scope.loadSections=function(limit,goPage){return fetchHandbook.get(_URL_sections.list+"?search=section.parent{null}1&limit="+limit+"&page="+goPage).then(function(res){return $scope.sections={},res.data._embedded.items.length>0?($scope.sections.pages=res.data.pages,$scope.sections.total=res.data.total,$scope.sections.items=[],angular.forEach(res.data._embedded.items,function(item){return item=translateSection(item),item.children={},item.children.items=[],item.children.total=0,item.children.show=!1,item._links.children&&fetchHandbook.get(item._links.children.href+"?limit=9999").then(function(child){return child.data._embedded.items.length>0?(item.children.total=child.data.total,angular.forEach(child.data._embedded.items,function(child_item){return item.children.items.push(translateSection(child_item))})):void 0},function(error){return void 0}),$scope.sections.items.push(item)})):($scope.sections.pages=0,$scope.sections.total=0,$scope.sections.items=[])},function(error){return void 0})},$scope.numPerPageOpt=[3,5,10,20],$scope.numPerPage=$scope.numPerPageOpt[2],$scope.currentPage=1,$scope.filteredUsers=[],$scope.currentPageUsers=[],$scope.onNPPChange=function(){return $scope.loadSections($scope.numPerPage,$scope.currentPage)},$scope.gotoPage=function(page){return $scope.loadSections($scope.numPerPage,page)},$scope.loadSections($scope.numPerPage,$scope.currentPage),$scope.parentSection=[],_loadAllParent=function(){return fetchHandbook.get(_URL_sections.list+"?search=section.parent{null}1&limit=9999").then(function(child){return child.data._embedded.items.length>0?angular.forEach(child.data._embedded.items,function(child_item){return $scope.parentSection.push(translateSection(child_item))}):void 0},function(error){return void 0})},_loadAllParent(),$scope.isUpdate=!1,$scope.isCreateSubSection=!0,$scope.selectedSec=null,$scope.showChildren=function(section){return section.children.show=!section.children.show},$scope.editSection=function(section){return section.title=section.translations.en_us.title?section.translations.en_us.title:section.title,section.description=section.translations.en_us.description?section.translations.en_us.description:section.description,$scope.formSection=section,$scope.selectedSec=section.id,section._links.parent?($scope.isCreateSubSection=!0,$timeout(function(){var temp;return temp=eval(section._links.parent.href.split("sections/")[1]),$scope.parentSelect=temp,$scope.changedValue(temp)})):($scope.isCreateSubSection=!1,$scope.parentSelect=null),$scope.isUpdate=!0},$scope.changedValue=function(id){return $scope.parentSelect=id},$scope.createSubSction=function(isSub){return $scope.selectedSec=null,$scope.isUpdate=!1,$scope.isCreateSubSection=isSub,$scope.formSection={description:"",title:"",version:"",status:""},$scope.parentSelect=null},$scope.formSection={description:"",title:"",version:"",status:""},$scope.deleteSection=function(section){var r,title;return title=section.translations.en_us.title?section.translations.en_us.title:section.title,r=confirm('Do you want to delete this section: "'+title+'"?'),r===!0?sectionService["delete"]({org_id:$scope.clientId,hand_id:$scope.handbookId,section_id:section.id},function(res){return $scope.loadSections($scope.numPerPage,$scope.currentPage)}):void 0},$scope.parentSelect=null,$scope.submitSection=function(){var sectionItem;return angular.forEach($scope.frm_section.$error.required,function(field){return field.$dirty=!0}),$scope.frm_section.$error.required.length?!1:(sectionItem={section:{description:$scope.formSection.description,title:$scope.formSection.title,version:$scope.formSection.version,handbook:$scope.handbookId,parent:$scope.parentSelect,locale:"en_us",enabled:$scope.formSection.enabled}},$scope.isUpdate===!0?sectionService.update({org_id:$scope.clientId,hand_id:$scope.handbookId,section_id:$scope.formSection.id},sectionItem,function(res){return $scope.loadSections($scope.numPerPage,$scope.currentPage),$scope.sectionUpdated="Update Success",$timeout(function(){return $scope.sectionUpdated=null,$scope.parentSelect?($scope.parentSection=[],_loadAllParent()):void 0},1e3)},function(error){return $scope.sectionUpdated=error.status+": Error, refresh & try again !"}):($scope.isCreateSubSection===!0&&$scope.isUpdate===!1&&sectionService.saveChild({org_id:$scope.clientId,hand_id:$scope.handbookId},sectionItem,function(res){return $scope.loadSections($scope.numPerPage,$scope.currentPage),$scope.sectionUpdated="Submit Success",$timeout(function(){return $scope.sectionUpdated=null,$scope.parentSection=[],_loadAllParent()},1e3)},function(error){return $scope.sectionUpdated=error.status+": Error, refresh & try again !"}),$scope.isCreateSubSection===!1&&$scope.isUpdate===!1?sectionService.save({org_id:$scope.clientId,hand_id:$scope.handbookId},sectionItem,function(res){return $scope.loadSections($scope.numPerPage,$scope.currentPage),$scope.sectionUpdated="Submit Success",$timeout(function(){return $scope.sectionUpdated=null},1e3)},function(error){return $scope.sectionUpdated=error.status+": Error, refresh & try again !"}):void 0))}}])}.call(this),function(){"use strict";angular.module("app.users",[]).controller("UsersCtrl",["$scope","$filter","fetchTabData","$location","$routeParams","config","$q","$modal","UserService","Users","fetchContact","$timeout",function($scope,$filter,fetchTabData,$location,$routeParams,config,$q,$modal,UserService,Users,fetchContact,$timeout){var _URL_users,_getUsers,_updateUser;$scope.clientId=$routeParams.clientId,_URL_users={list:config.path.baseURL+config.path.contacts.replace(":org_id",$routeParams.clientId)},$scope.getTime=function(ndate){var dateAsDateObject;return dateAsDateObject=new Date(Date.parse(ndate)),dateAsDateObject.getTime()},_getUsers=function(limit,goPage){return fetchContact.get(_URL_users.list+"?limit="+limit+"&page="+goPage).then(function(res){var i,item,_fn,_ref;if(res.data._embedded.items.length){$scope.users=res.data,$scope.users.items=[],_ref=res.data._embedded.items,_fn=function(itemInstance){return Users.get(itemInstance._links.employee.href).then(function(res){200===res.status&&"object"==typeof res&&(res.data.position_data=itemInstance,$scope.users.items.push(res.data),Users.get(_URL_users.list+"/"+itemInstance.id+"/tags").then(function(tag){var tag_lst;return tag.data._embedded.items.length>0?(tag_lst=[],angular.forEach(tag.data._embedded.items,function(tag){return tag.employee_class?tag_lst.push(tag.name):void 0}),res.data.employee_class=tag_lst.join(", "),res.data.tags=tag.data._embedded.items):void 0},function(error){return void 0}))},function(error){return void 0})};for(i in _ref)item=_ref[i],_fn(item)}})},$scope.numPerPageOpt=[3,5,10,20],$scope.numPerPage=$scope.numPerPageOpt[2],$scope.currentPage=1,$scope.filteredUsers=[],$scope.currentPageUsers=[],$scope.onNPPChange=function(){return _getUsers($scope.numPerPage,$scope.currentPage)},$scope.gotoPage=function(page){return _getUsers($scope.numPerPage,$scope.currentPage)},$scope.removeUser=function(user){var deleteUrl,r;r=confirm('Do you want to delete this user "'+user.email+'"?'),r===!0&&(deleteUrl=config.path.baseURL+config.path.users+"/",Users["delete"](deleteUrl+user.id).then(function(res){"object"==typeof res&&204===res.status&&$timeout(function(){return location.reload()},300)},function(error){return alert(error.status+": Error, refresh & try again !")}))},$scope.enabUser=function(user,i){var r;r=confirm('Do you want to change this user "'+user.email+'"?'),r===!0&&_updateUser(user,i)},_updateUser=function(user,i){var newData,numTag,uTags,updateContact;return newData={user:{first_name:user.first_name,last_name:user.last_name,username:user.username,email:user.email,code:user.code,four_digit_pin:user.four_digit_pin||"",mobile_no:user.mobile_no||"",office_no:user.office_no||"",enabled:!user.enabled,date_added:$filter("date")(new Date(user.date_added),"yyyy-MM-ddT00:00:00+0000")}},updateContact={position:{employee:user.id,enabled:!user.enabled,employer:$scope.clientId,handbook_contact:user.position_data.position_data}},user.tags&&(uTags={},numTag=1,angular.forEach(user.tags,function(tag){var keyTag;return keyTag="tag"+numTag,uTags[keyTag]={},uTags[keyTag].name=tag.name,uTags[keyTag].enabled=tag.enabled,uTags[keyTag].employee_class=tag.employee_class,uTags[keyTag].employee_function=tag.employee_function,numTag++}),updateContact.position.tags=uTags),Users.put(user._links.self.href,newData).then(function(res){204===res.status&&Users.put(_URL_users.list+"/"+user.position_data.id,updateContact).then(function(res){return 204===res.status?($scope.infoUpdated="Updated user "+user.email+" successfully!",$scope.users.items[i].enabled=newData.user.enabled,$timeout(function(){return $scope.infoUpdated=null},2e3)):void 0},function(error){return $scope.infoUpdated=error.status+" : Error updating, refresh & try again!"})},function(error){return $scope.infoUpdated=error.status+": Error updating, refresh & try again!",$timeout(function(){return $scope.infoUpdated=null},2e3)})},_getUsers($scope.numPerPage,$scope.currentPage)}]).controller("UserCtrl",["$scope","$filter","fetchTabData","$location","$routeParams","config","$q","$modal","UserService","Users","$timeout",function($scope,$filter,fetchTabData,$location,$routeParams,config,$q,$modal,UserService,Users,$timeout){var _URL,_getTags,_getUser,_searchUserbyEntry;return $scope.clientId=$routeParams.clientId,$scope.userId=$routeParams.userId?$routeParams.userId.trim():!1,$scope.updateTags={},$scope.userId?(_URL={list:config.path.baseURL+config.path.users,detail:config.path.baseURL+config.path.contacts.replace(":org_id",$routeParams.clientId)+"/",tags:config.path.baseURL+"/tags"},_getUser=function(){return Users.get(_URL.detail+$scope.userId).then(function(pos){return 200===pos.status&&"object"==typeof pos?($scope.updateTags.position={},$scope.updateTags.position.title=pos.data.title,$scope.updateTags.position.active=pos.data.active,$scope.updateTags.position.employer=$scope.clientId,$scope.updateTags.position.handbook_contact=pos.data.handbook_contact,Users.get(pos.data._links.employee.href).then(function(res){200===res.status&&"object"==typeof res&&($scope.user=res.data,$scope.user.position_data=pos.data,$scope.user.employee_class=[],$scope.user.employee_function=[],$scope.updateTags.position.employee=$scope.user.id,"-0001-11-30T00:00:00+0655"===$scope.user.birthday&&($scope.user.birthday=""),"-0001-11-30T00:00:00+0655"===$scope.user.date_added?$scope.user.date_added="":$scope.user.date_added=$filter("date")(new Date($scope.user.date_added),"MM/dd/yyyy"),Users.get(_URL.detail+$scope.userId+"/tags").then(function(tag){return tag.data._embedded.items.length>0?($scope.user.employee_class=$filter("filter")(tag.data._embedded.items,{employee_class:!0}),$scope.user.employee_function=$filter("filter")(tag.data._embedded.items,{employee_function:!0})):void 0},function(error){return void 0}))},function(error){return void 0})):void 0},function(error){return void 0})},_searchUserbyEntry=function(entry,searchVal,callback){var get_result;if("function"==typeof callback)return get_result=null,Users.get(_URL.list+"?search=user."+entry+":"+searchVal).then(function(res){return 200===res.status&&"object"==typeof res&&(get_result=res.data,callback(get_result)),get_result},function(error){return void callback(error)})},$scope.isDisable=!0,$scope.updateUser=function(){var birthday,date_added,newData,numTag,user_code;return angular.forEach($scope.frm_updateuser.$error.required,function(field){return field.$dirty=!0}),$scope.frm_updateuser.$error.required.length||$scope.frm_updateuser.$invalid?!1:(user_code=$scope.user.code,user_code=user_code.trim(),user_code=user_code.toLowerCase(),date_added=$scope.user.date_added,date_added=""===date_added?$filter("date")(new Date,"yyyy-MM-ddT00:00:00+0000"):$filter("date")(new Date($scope.user.date_added),"yyyy-MM-ddT00:00:00+0000"),newData={user:{first_name:$scope.user.first_name,last_name:$scope.user.last_name,username:$scope.user.username,email:$scope.user.email,code:$scope.user.code,enabled:$scope.user.enabled,mobile_no:$scope.user.mobile_no||"",office_no:$scope.user.office_no||"",date_added:date_added,four_digit_pin:$scope.user.four_digit_pin||""}},$scope.updateTags.position={title:"Position of "+$scope.user.username,employee:$scope.user.id,enabled:$scope.user.enabled,employer:$scope.clientId,handbook_contact:$scope.user.position_data.handbook_contact},$scope.updateTags.position.tags={},numTag=1,angular.forEach($scope.user.employee_class,function(tag){var keyTag;return keyTag="tag"+numTag,$scope.updateTags.position.tags[keyTag]={},$scope.updateTags.position.tags[keyTag].name=tag.name,$scope.updateTags.position.tags[keyTag].enabled=!0,$scope.updateTags.position.tags[keyTag].employee_class=1,$scope.updateTags.position.tags[keyTag].employee_function=0,numTag++}),angular.forEach($scope.user.employee_function,function(tag){var keyTag;return keyTag="tag"+numTag,$scope.updateTags.position.tags[keyTag]={},$scope.updateTags.position.tags[keyTag].name=tag.name,$scope.updateTags.position.tags[keyTag].enabled=!0,$scope.updateTags.position.tags[keyTag].employee_class=0,$scope.updateTags.position.tags[keyTag].employee_function=1,numTag++}),$scope.updateTags.position.enabled=$scope.user.enabled,birthday=$scope.user.birthday||"",""!==birthday&&(birthday=$filter("date")(new Date(birthday),"yyyy-MM-ddT00:00:00+0000"),newData.user.birthday=birthday),Users.put(_URL.list+"/"+$scope.user.id,newData).then(function(res){204===res.status&&Users.put(_URL.detail+$scope.userId,$scope.updateTags).then(function(res){204===res.status&&($scope.infoUpdated="Updated user successfully!",$timeout(function(){return $scope.infoUpdated=null},2e3))},function(error){return $scope.infoUpdated=error.status+": Error update tags, refresh & try again!"})},function(error){var checkError;return checkError=function(datajson){return"object"==typeof datajson&&datajson._embedded.items.length?$scope.infoUpdated=error.status+": Verification code existed, refresh & try again!":$scope.infoUpdated=error.status+": Error API, refresh & try again!"},_searchUserbyEntry("code",newData.user.code,checkError)}))},$scope.openDatepicker=function($event){return $event.preventDefault(),$event.stopPropagation(),$scope.datepickerOpened=!0},$scope.tags={},$scope.tags.employee_class=[],$scope.tags.employee_function=[],_getTags=function(){return Users.get(_URL.tags).then(function(res){200===res.status&&"object"==typeof res&&angular.forEach(res.data._embedded.items,function(tag){return tag.employee_class&&tag.active&&$scope.tags.employee_class.push(tag),tag.employee_function&&tag.active?$scope.tags.employee_function.push(tag):void 0})},function(error){return void 0})},_getTags(),$scope.tags.getEmployeeClass=function(query){var deferred;return deferred=$q.defer(),deferred.resolve($scope.tags.employee_class),deferred.promise},$scope.tags.getEmployeeFunction=function(query){var deferred;return deferred=$q.defer(),deferred.resolve($scope.tags.employee_function),deferred.promise},$scope.deleteUser=function(){var r;r=confirm('Do you want to delete this user "'+$scope.user.email+'"?'),r===!0&&Users["delete"](_URL.detail+$scope.user.id).then(function(res){"object"==typeof res&&204===res.status&&($scope.infoUpdated="Deleted user successfully!",$timeout(function(){var clientId;return clientId=$routeParams.clientId,$location.path("/clients/"+clientId+"/user")},300))},function(error){return $scope.infoUpdated=error.status+": Error, refresh & try again !"})},"new"!==$scope.userId?_getUser():void 0):void(location.href="#/clients/"+$scope.clientId)}]).controller("NewUserCtrl",["$scope","$filter","fetchTabData","$location","$routeParams","config","$q","UserService","Users","$timeout","ContactService","php",function($scope,$filter,fetchTabData,$location,$routeParams,config,$q,UserService,Users,$timeout,ContactService,php){var _URL,_getTags,_insertUser,_searchUserbyEntry;return $scope.clientId=$routeParams.clientId,$scope.isExcel=!1,_URL={detail:config.path.baseURL+config.path.users,tags:config.path.baseURL+"/tags"},_searchUserbyEntry=function(entry,searchVal,callback){var get_result;if("function"==typeof callback)return get_result=null,Users.get(_URL.detail+"?search=user."+entry+":"+searchVal).then(function(res){return 200===res.status&&"object"==typeof res&&(get_result=res.data,callback(get_result)),get_result},function(error){return void callback(error)})},_insertUser=function(user){var newData;return newData={user:user},Users.post(_URL.detail,newData).then(function(res){return"object"==typeof res&&201===res.status?Users.get(_URL.detail+"/"+user.email.trim()).then(function(res){var newContact,numTag;return $scope.infoUpdated="Created New",200===res.status&&"object"==typeof res?(newContact={position:{title:"Position of "+user.username,employee:res.data.id,enabled:!0,employer:$scope.clientId,handbook_contact:!0}},newContact.position.tags={},numTag=1,angular.forEach($scope.user_tags.employee_class,function(tag){var keyTag;return keyTag="tag"+numTag,newContact.position.tags[keyTag]={},newContact.position.tags[keyTag].name=tag.name,newContact.position.tags[keyTag].enabled=!0,newContact.position.tags[keyTag].employee_class=1,newContact.position.tags[keyTag].employee_function=0,numTag++}),angular.forEach($scope.user_tags.employee_function,function(tag){var keyTag;return keyTag="tag"+numTag,newContact.position.tags[keyTag]={},newContact.position.tags[keyTag].name=tag.name,newContact.position.tags[keyTag].enabled=!0,newContact.position.tags[keyTag].employee_class=0,newContact.position.tags[keyTag].employee_function=1,numTag++}),ContactService.save({org_id:$scope.clientId},newContact,function(res){return"object"==typeof res&&201===res.code?$timeout(function(){return $location.path("/clients/"+$scope.clientId+"/user")},500):void 0})):void 0},function(error){return alert("API error connection: Not yet create user for this client")}):void 0},function(error){var checkError;return checkError=function(datajson){return"object"==typeof datajson&&datajson._embedded.items.length?$scope.infoUpdated=error.status+": Verification code existed, refresh & try again!":error.data.errors.children.email?$scope.infoUpdated=error.status+": Email is already used.":$scope.infoUpdated=error.status+": Error API, refresh & try again!"},_searchUserbyEntry("code",newData.user.code,checkError)})},$scope.openDatepicker=function($event){return $event.preventDefault(),$event.stopPropagation(),$scope.datepickerOpened=!0},$scope.tags={},$scope.tags.employee_class=[],$scope.tags.employee_function=[],
_getTags=function(){return Users.get(_URL.tags).then(function(res){200===res.status&&"object"==typeof res&&angular.forEach(res.data._embedded.items,function(tag){return tag.employee_class&&tag.active&&$scope.tags.employee_class.push(tag),tag.employee_function&&tag.active?$scope.tags.employee_function.push(tag):void 0})},function(error){return void 0})},_getTags(),$scope.tags.getEmployeeClass=function(query){var deferred;return deferred=$q.defer(),deferred.resolve($scope.tags.employee_class),deferred.promise},$scope.tags.getEmployeeFunction=function(query){var deferred;return deferred=$q.defer(),deferred.resolve($scope.tags.employee_function),deferred.promise},$scope.submitCreateUser=function(){var birthday,user;return angular.forEach($scope.frm_adduser.$error.required,function(field){return field.$dirty=!0}),$scope.frm_adduser.$error.required.length?!1:($scope.isExcel=!1,user={first_name:$scope.user.first_name,last_name:$scope.user.last_name,username:$scope.user.username,email:$scope.user.email,enabled:!0,plain_password:$scope.user.password,ssn:null,code:php.randomString(6,"a#"),mobile_no:$scope.user.mobile_no||"",office_no:$scope.user.office_no||"",date_added:$filter("date")(new Date,"yyyy-MM-ddT00:00:00+0000")},birthday=$scope.user.birthday||"",""!==birthday&&(birthday=$filter("date")(new Date(birthday),"yyyy-MM-ddT00:00:00+0000"),user.birthday=birthday),_insertUser(user))},$scope.createUserExcel=function(){var birthday,insertUser,user;return $scope.isExcel=!0,user=$scope.jsonResult.data.json,void 0===user.username||null===user.username||""===user.username?void($scope.infoUpdated="Missing username."):void 0===user.first_name||null===user.first_name||""===user.first_name?void($scope.infoUpdated="Missing first_name."):void 0===user.email||null===user.email||""===user.email?void($scope.infoUpdated="Missing email."):void 0===user.plain_password||null===user.plain_password||""===user.plain_password?void($scope.infoUpdated="Missing password."):void 0===user.birthday||null===user.birthday||""===user.birthday?void($scope.infoUpdated="Missing birthday."):(insertUser={first_name:user.first_name,last_name:user.last_name,username:user.username,email:user.email,enabled:!0,plain_password:user.plain_password,ssn:null,code:php.randomString(6,"a#"),mobile_no:user.mobile_no||"",office_no:user.office_no||"",date_added:$filter("date")(new Date,"yyyy-MM-ddT00:00:00+0000")},birthday=user.birthday||"",""!==birthday&&(birthday=$filter("date")(new Date(birthday),"yyyy-MM-ddT00:00:00+0000"),insertUser.birthday=birthday),_insertUser(insertUser))}}])}.call(this),function(){"use strict";angular.module("app.users.services",[]).factory("UserService",function($resource,config){var service;return service=$resource(config.path.baseURL+config.path.contacts,{},{query:{method:"GET",action:config.path.baseURL+config.path.contacts,isArray:!0},update:{method:"PUT",action:config.path.contact},save:{method:"POST",action:config.path.baseURL+config.path.contacts}})}).factory("Users",["$http","$q","$resource",function($http,$q,$resource){return{get:function(url){var d;return d=$q.defer(),$http({method:"GET",url:url}).then(function(res){d.resolve(res)},function(error){d.reject(error)}),d.promise},post:function(url,data){var d;return d=$q.defer(),$http({method:"POST",url:url,data:data}).then(function(res){d.resolve(res)},function(error){d.reject(error)}),d.promise},put:function(url,data){var d;return d=$q.defer(),$http({method:"PUT",url:url,data:data}).then(function(res){d.resolve(res)},function(error){d.reject(error)}),d.promise},"delete":function(url){var d;return d=$q.defer(),$http({method:"DELETE",url:url}).then(function(res){d.resolve(res)},function(error){d.reject(error)}),d.promise}}}]).factory("aREST",["$http","$q","$resource",function($http,$q,$resource){return{get:function(url){var d;return d=$q.defer(),$http({method:"GET",url:url}).then(function(res){d.resolve(res)},function(error){d.reject(error)}),d.promise},post:function(url,data){var d;return d=$q.defer(),$http({method:"POST",url:url,data:data}).then(function(res){d.resolve(res)},function(error){d.reject(error)}),d.promise},put:function(url,data){var d;return d=$q.defer(),$http({method:"PUT",url:url,data:data}).then(function(res){d.resolve(res)},function(error){d.reject(error)}),d.promise},"delete":function(url){var d;return d=$q.defer(),$http({method:"DELETE",url:url}).then(function(res){d.resolve(res)},function(error){d.reject(error)}),d.promise}}}]).directive("sheetParser",["$timeout",function($timeout){var controller,link,sheet_to_custom_json;return controller=["$scope",function($scope){var firstRun;return $scope.fileName="No file selected",$scope.uniqueID=(new Date).getTime(),firstRun=!0,$scope.$watch("parsedJson",function(nv){return firstRun?void(firstRun=!1):nv?$scope.result={status:"OK",data:$scope.parsedJson}:$scope.result={status:"error",message:"Unsuported sheet type or couldn't read sheet"}})}],link=function(scope,ele,attr){var files,inputFile,workbook;return inputFile=$(ele.find("input")),files=[],workbook={},inputFile.on("change",function(e){var f,fileName,isValid,name,reader;return this.files&&this.files.length>1?scope.fileName=(this.getAttribute("data-multiple-caption")||"").replace("{count}",this.files.length):scope.fileName=e.target.value.split("\\").pop(),scope.fileName?scope.label=scope.fileName:scope.label="No file selected",files=e.target.files,f=files[0],fileName=f.name.split(".")[f.name.split.length-1],isValid="csv"===fileName||"xls"===fileName||"xlsx"===fileName?!0:!1,isValid?(reader=new FileReader,name=f.name,reader.onload=function(e){var data,first_sheet_name,json,worksheet;return data=e.target.result,workbook=XLSX.read(data,{type:"binary"}),first_sheet_name=workbook.SheetNames[0],worksheet=workbook.Sheets[first_sheet_name],json=sheet_to_custom_json(worksheet),data={name:name,json:json},scope.parsedJson=data},reader.readAsBinaryString(f)):scope.parsedJson=!1})},sheet_to_custom_json=function(sheet){var firstCol,secondCol,status,tempCell,tempObj;return firstCol=[],secondCol=[],tempCell={},tempObj={},status="",angular.forEach(sheet,function(cell,key){return key.split("A").length>1?(tempCell={id:key,value:cell.v},firstCol.push(tempCell)):key.split("B").length>1?(tempCell={id:key,value:cell.v},secondCol.push(tempCell)):status="Invalid format"}),angular.forEach(firstCol,function(value,index){return secondCol[index]&&secondCol[index].value&&firstCol[index].id.split("A")[1]===secondCol[index].id.split("B")[1]?tempObj[value.value]=secondCol[index].value:void 0}),tempObj},{restrict:"E",scope:{result:"=ngResult"},templateUrl:"views/directives/uploadExcel.html",controller:controller,link:link}}])}.call(this),function(){"use strict";angular.module("app.notifications",[]).controller("notificationCtrl",["$scope","$filter","fetchTabData","$location","$routeParams","config","$q","$modal","aREST","$timeout",function($scope,$filter,fetchTabData,$location,$routeParams,config,$q,$modal,aREST,$timeout){var getNOW_TimeStamp,_URL_notifis,_getNotifis;return $scope.clientId=$routeParams.clientId,$scope.notifis=[],_URL_notifis={list:config.path.baseURL+config.path.clients+"/"+$scope.clientId+"/notifications"},_getNotifis=function(limit,goPage){return aREST.get(_URL_notifis.list+"?limit="+limit+"&page="+goPage).then(function(res){return"object"==typeof res.data._embedded&&res.data._embedded.items.length>0?($scope.notifis=res.data,$scope.notifis._embedded.items=$filter("orderBy")($scope.notifis._embedded.items,"-id",!1)):void 0},function(error){return void 0})},$scope.numPerPageOpt=[3,5,10,20],$scope.numPerPage=$scope.numPerPageOpt[3],$scope.currentPage=1,$scope.filteredUsers=[],$scope.currentPageUsers=[],$scope.onNPPChange=function(){return _getNotifis($scope.numPerPage,$scope.currentPage)},$scope.gotoPage=function(page){return _getNotifis($scope.numPerPage,$scope.currentPage)},$scope.getTime=function(ndate){var dateAsDateObject;return 1===ndate&&(ndate=getNOW_TimeStamp()),dateAsDateObject=new Date(Date.parse(ndate)),dateAsDateObject.getTime()},getNOW_TimeStamp=function(){var now;return now=new Date,now.getMonth()+1+"/"+now.getDate()+"/"+now.getFullYear()+" "+now.getHours()+":"+(now.getMinutes()<10?"0"+now.getMinutes():now.getMinutes())+":"+(now.getSeconds()<10?"0"+now.getSeconds():now.getSeconds())},$scope.new_notifi={},$scope.submitCreateNotifi=function(){var newMsg;return newMsg={message:{subject:$scope.new_notifi.subject.trim(),body:$scope.new_notifi.body.trim()}},aREST.post(_URL_notifis.list,newMsg).then(function(res){return"object"==typeof res&&201===res.status?(newMsg.message.created_at=1,newMsg.message.isNew=1,$scope.notifis._embedded.items.length?($scope.notifis._embedded.items.unshift(newMsg.message),$timeout(function(){return $scope.notifis._embedded.items[0].isNew=0},3e3)):location.reload()):void 0},function(error){return void 0})},$scope.pushNotifi=function(notifi){var pushMsg,re_push;return pushMsg={push:{current:0}},(re_push=function(pMsg){return aREST.get(notifi._links.push.href).then(function(res){return"object"==typeof res&&200===res.status?(pMsg.push.current=res.data.current+1,pMsg.push.current<=res.data.total?aREST.put(notifi._links.push.href,pMsg).then(function(res){return re_push(pMsg)},function(error){return alert(error.data.message)}):alert("The message has been delivered to employees in the company.")):void 0},function(error){return void 0})})(pushMsg)},$scope.showNotiForm=function(key){$scope.notifis._embedded.items[key].shw_frm=!$scope.notifis._embedded.items[key].shw_frm},$scope.submitUpdateNotifi=function(key){var newMsg;return newMsg={message:{subject:$scope.notifis._embedded.items[key].subject.trim(),body:$scope.notifis._embedded.items[key].body.trim()}},aREST.put($scope.notifis._embedded.items[key]._links.self.href,newMsg).then(function(res){return"object"==typeof res&&204===res.status?$timeout(function(){return window.location.reload()},500):void 0},function(error){return void 0})},$scope.deleteNotifi=function(key){var r;return r=confirm('Do you want to delete this notification "'+$scope.notifis._embedded.items[key].subject.trim()+'"?'),r===!0?aREST["delete"]($scope.notifis._embedded.items[key]._links.self.href).then(function(res){return"object"==typeof res&&204===res.status?$timeout(function(){return window.location.reload()},500):void 0},function(error){return void 0}):void 0},_getNotifis($scope.numPerPage,$scope.currentPage)}])}.call(this),function(){"use strict";angular.module("app.employee",[]).controller("employeeCtrl",["$scope",function($scope){}])}.call(this),function(){"use strict";angular.module("app.ui.form.ctrls",[]).controller("TagsDemoCtrl",["$scope",function($scope){return $scope.tags=["foo","bar"]}]).controller("DatepickerDemoCtrl",["$scope",function($scope){return $scope.today=function(){return $scope.dt=new Date},$scope.today(),$scope.showWeeks=!0,$scope.toggleWeeks=function(){return $scope.showWeeks=!$scope.showWeeks},$scope.clear=function(){return $scope.dt=null},$scope.disabled=function(date,mode){return"day"===mode&&(0===date.getDay()||6===date.getDay())},$scope.toggleMin=function(){var _ref;return $scope.minDate=null!=(_ref=$scope.minDate)?_ref:{"null":new Date}},$scope.toggleMin(),$scope.open=function($event){return $event.preventDefault(),$event.stopPropagation(),$scope.opened=!0},$scope.dateOptions={"year-format":"'yy'","starting-day":1},$scope.formats=["dd-MMMM-yyyy","yyyy/MM/dd","shortDate"],$scope.format=$scope.formats[0]}]).controller("TimepickerDemoCtrl",["$scope",function($scope){return $scope.mytime=new Date,$scope.hstep=1,$scope.mstep=15,$scope.options={hstep:[1,2,3],mstep:[1,5,10,15,25,30]},$scope.ismeridian=!0,$scope.toggleMode=function(){return $scope.ismeridian=!$scope.ismeridian},$scope.update=function(){var d;return d=new Date,d.setHours(14),d.setMinutes(0),$scope.mytime=d},$scope.changed=function(){return void 0},$scope.clear=function(){return $scope.mytime=null}}]).controller("TypeaheadCtrl",["$scope",function($scope){return $scope.selected=void 0,$scope.states=["Alabama","Alaska","Arizona","Arkansas","California","Colorado","Connecticut","Delaware","Florida","Georgia","Hawaii","Idaho","Illinois","Indiana","Iowa","Kansas","Kentucky","Louisiana","Maine","Maryland","Massachusetts","Michigan","Minnesota","Mississippi","Missouri","Montana","Nebraska","Nevada","New Hampshire","New Jersey","New Mexico","New York","North Dakota","North Carolina","Ohio","Oklahoma","Oregon","Pennsylvania","Rhode Island","South Carolina","South Dakota","Tennessee","Texas","Utah","Vermont","Virginia","Washington","West Virginia","Wisconsin","Wyoming"]}]).controller("RatingDemoCtrl",["$scope",function($scope){return $scope.rate=7,$scope.max=10,$scope.isReadonly=!1,$scope.hoveringOver=function(value){return $scope.overStar=value,$scope.percent=100*(value/$scope.max)},$scope.ratingStates=[{stateOn:"glyphicon-ok-sign",stateOff:"glyphicon-ok-circle"},{stateOn:"glyphicon-star",stateOff:"glyphicon-star-empty"},{stateOn:"glyphicon-heart",stateOff:"glyphicon-ban-circle"},{stateOn:"glyphicon-heart"},{stateOff:"glyphicon-off"}]}])}.call(this),function(){angular.module("app.ui.form.directives",[]).directive("uiRangeSlider",[function(){return{restrict:"A",link:function(scope,ele){return ele.slider()}}}]).directive("uiFileUpload",[function(){return{restrict:"A",link:function(scope,ele){return ele.bootstrapFileInput()}}}]).directive("uiSpinner",[function(){return{restrict:"A",compile:function(ele,attrs){return ele.addClass("ui-spinner"),{post:function(){return ele.spinner()}}}}}]).directive("uiWizardForm",[function(){return{link:function(scope,ele){return ele.steps()}}}])}.call(this),function(){"use strict";angular.module("app.form.validation",[]).controller("wizardFormCtrl",["$scope",function($scope){return $scope.wizard={firstName:"some name",lastName:"",email:"",password:"",age:"",address:""},$scope.isValidateStep1=function(){return void 0},$scope.finishedWizard=function(){return void 0}}]).controller("formConstraintsCtrl",["$scope",function($scope){var original;return $scope.form={required:"",minlength:"",maxlength:"",length_rage:"",type_something:"",confirm_type:"",foo:"",email:"",url:"",num:"",minVal:"",maxVal:"",valRange:"",pattern:""},original=angular.copy($scope.form),$scope.revert=function(){return $scope.form=angular.copy(original),$scope.form_constraints.$setPristine()},$scope.canRevert=function(){return!angular.equals($scope.form,original)||!$scope.form_constraints.$pristine},$scope.canSubmit=function(){return $scope.form_constraints.$valid&&!angular.equals($scope.form,original)}}]).controller("signinCtrl",["$scope",function($scope){var original;return $scope.user={email:"",password:""},$scope.showInfoOnSubmit=!1,original=angular.copy($scope.user),$scope.revert=function(){return $scope.user=angular.copy(original),$scope.form_signin.$setPristine()},$scope.canRevert=function(){return!angular.equals($scope.user,original)||!$scope.form_signin.$pristine},$scope.canSubmit=function(){return $scope.form_signin.$valid&&!angular.equals($scope.user,original)},$scope.submitForm=function(){return $scope.showInfoOnSubmit=!0,$scope.revert()}}]).controller("signupCtrl",["$scope",function($scope){var original;return $scope.user={name:"",email:"",password:"",confirmPassword:"",age:""},$scope.showInfoOnSubmit=!1,original=angular.copy($scope.user),$scope.revert=function(){return $scope.user=angular.copy(original),$scope.form_signup.$setPristine(),$scope.form_signup.confirmPassword.$setPristine()},$scope.canRevert=function(){return!angular.equals($scope.user,original)||!$scope.form_signup.$pristine},$scope.canSubmit=function(){return $scope.form_signup.$valid&&!angular.equals($scope.user,original)},$scope.submitForm=function(){return $scope.showInfoOnSubmit=!0,$scope.revert()}}]).directive("validateEquals",[function(){return{require:"ngModel",link:function(scope,ele,attrs,ngModelCtrl){var validateEqual;return validateEqual=function(value){var valid;return valid=value===scope.$eval(attrs.validateEquals),ngModelCtrl.$setValidity("equal",valid),"function"==typeof valid?valid({value:void 0}):void 0},ngModelCtrl.$parsers.push(validateEqual),ngModelCtrl.$formatters.push(validateEqual),scope.$watch(attrs.validateEquals,function(newValue,oldValue){return newValue!==oldValue?ngModelCtrl.$setViewValue(ngModelCtrl.$ViewValue):void 0})}}}])}.call(this),function(){"use strict";angular.module("app.businesses",[]).controller("BusinessesCtrl",["$scope","$filter","fetchTabData","$location","$routeParams","config","$q","$modal","Businesses","fetchContact","$timeout",function($scope,$filter,fetchTabData,$location,$routeParams,config,$q,$modal,Businesses,fetchContact,$timeout){var _URL_businesses,_getBusinesses;$scope.clientId=$routeParams.clientId,_URL_businesses={list:config.path.baseURL+config.path.businesses.replace(":org_id",$routeParams.clientId),post:config.path.baseURL+"/businesses"},$scope.getTime=function(ndate){var dateAsDateObject;return dateAsDateObject=new Date(Date.parse(ndate)),dateAsDateObject.getTime()},_getBusinesses=function(limit,goPage){return Businesses.get(_URL_businesses.list+"?limit="+limit+"&page="+goPage).then(function(res){res.data._embedded.items.length&&($scope.businesses=res.data)})},$scope.numPerPageOpt=[3,5,10,20],$scope.numPerPage=$scope.numPerPageOpt[2],$scope.currentPage=1,$scope.filteredUsers=[],$scope.currentPageUsers=[],$scope.onNPPChange=function(){return _getBusinesses($scope.numPerPage,$scope.currentPage)},$scope.gotoPage=function(page){return _getBusinesses($scope.numPerPage,$scope.currentPage)},$scope.removeBusiness=function(business){var deleteUrl,r;r=confirm('Do you want to delete this user "'+business.name+'"?'),r===!0&&(deleteUrl=_URL_businesses.post+"/",Businesses["delete"](deleteUrl+business.id).then(function(res){"object"==typeof res&&204===res.status&&$timeout(function(){return location.reload()},300)},function(error){return alert(error.status+": Error, refresh & try again !")}))},$scope.submitNewBusiness=function(){var new_data;return angular.forEach($scope.frm_create_business.$error.required,function(field){return field.$dirty=!0}),$scope.frm_create_business.$error.required.length||!$scope.frm_create_business.$valid?!1:(new_data={business:{name:$scope.bus.name,merchant_code:$scope.bus.merchant_code,owner:$scope.clientId}},void Businesses.post(_URL_businesses.post,new_data).then(function(res){"object"==typeof res&&201===res.status&&$timeout(function(){return location.reload()},300)},function(error){return alert(error.status+" : Try later and new company code")}))},_getBusinesses($scope.numPerPage,$scope.currentPage)}]).controller("BusinessCtrl",["$scope","$filter","fetchTabData","$location","$routeParams","config","$q","$modal","Businesses","$timeout",function($scope,$filter,fetchTabData,$location,$routeParams,config,$q,$modal,Businesses,$timeout){var _URL,_getBusiness,_getTags,_getTypes;return $scope.clientId=$routeParams.clientId,$scope.businessId=$routeParams.businessId?$routeParams.businessId.trim():!1,$scope.businessId?(_URL={detail:config.path.baseURL+"/businesses/"+$scope.businessId,post_promotions:config.path.baseURL+"/promotions",types:config.path.baseURL+"/promotion/types",tags:config.path.baseURL+"/tags"},_getBusiness=function(){return Businesses.get(_URL.detail).then(function(bus){return 200===bus.status&&"object"==typeof bus?($scope.business=bus.data,bus.data._links.promotions&&Businesses.get(bus.data._links.promotions.href).then(function(pro){return 200===pro.status&&"object"==typeof pro?$scope.business.promotions=pro.data:void 0},function(error){return void 0}),bus.data._links.outlets&&Businesses.get(bus.data._links.outlets.href).then(function(res){return 200===res.status&&"object"==typeof res?$scope.business.outlets=res.data:void 0},function(error){return void 0}),bus.data._links.types&&Businesses.get(bus.data._links.types.href).then(function(types){return types.data._embedded.items.length>0?$scope.business.types=types.data._embedded.items:$scope.business.types=[]},function(error){return void 0}),bus.data._links.types?Businesses.get(bus.data._links.tags.href).then(function(tags){return tags.data._embedded.items.length>0?$scope.business.tags=tags.data._embedded.items:$scope.business.tags=[]},function(error){return void 0}):void 0):void 0},function(error){return void 0})},$scope.tags={},$scope.tags.business_type=[],$scope.tags.business_category=[],_getTags=function(){return Businesses.get(_URL.tags).then(function(res){200===res.status&&"object"==typeof res&&angular.forEach(res.data._embedded.items,function(tag){return tag.business_type&&tag.enabled&&$scope.tags.business_type.push(tag),tag.business_category&&tag.enabled?$scope.tags.business_category.push(tag):void 0})},function(error){return void 0})},_getTags(),$scope.tags.getBusinessType=function(query){var deferred;return deferred=$q.defer(),deferred.resolve($scope.tags.business_type),deferred.promise},$scope.tags.getBusinessCategory=function(query){var deferred;return deferred=$q.defer(),deferred.resolve($scope.tags.business_category),deferred.promise},$scope.isDisable=!0,$scope.updateBusiness=function(){var new_data,numTag,numType;return angular.forEach($scope.frm_update_business.$error.required,function(field){return field.$dirty=!0}),$scope.frm_update_business.$error.required.length||!$scope.frm_update_business.$valid?!1:(new_data={business:{name:$scope.business.name,merchant_code:$scope.business.merchant_code,owner:$scope.clientId,enabled:!0}},numType=1,new_data.business.types={},angular.forEach($scope.business.types,function(tag){var keyType;return keyType="types"+numType,new_data.business.types[keyType]={},new_data.business.types[keyType].name=tag.name,new_data.business.types[keyType].enabled=!0,new_data.business.types[keyType].business_type=1,new_data.business.types[keyType].business_category=0,numType++}),numTag=1,new_data.business.tags={},angular.forEach($scope.business.tags,function(tag){var keyTag;return keyTag="tag"+numTag,new_data.business.tags[keyTag]={},new_data.business.tags[keyTag].name=tag.name,new_data.business.tags[keyTag].enabled=!0,new_data.business.tags[keyTag].business_type=0,new_data.business.tags[keyTag].business_category=1,numTag++}),void Businesses.put(_URL.detail,new_data).then(function(res){return"object"==typeof res&&204===res.status?$scope.infoUpdated="Update Successfully!":void 0},function(error){return alert(error.status+" : Error, refresh & try again !")}))},$scope.deleteBusiness=function(){var r;r=confirm('Do you want to delete this business "'+$scope.business.name+'"?'),r===!0&&Businesses["delete"](_URL.detail).then(function(res){"object"==typeof res&&204===res.status&&($scope.infoUpdated="Deleted business successfully!",$timeout(function(){var clientId;return clientId=$routeParams.clientId,$location.path("/merchant/"+clientId+"/business")},300))},function(error){return $scope.infoUpdated=error.status+": Error, refresh & try again !"})},$scope.submitNewOutlet=function(){var new_data;return angular.forEach($scope.frm_create_outlet.$error.required,function(field){return field.$dirty=!0}),$scope.frm_create_outlet.$error.required.length||!$scope.frm_create_outlet.$valid?!1:(new_data={outlet:{name:$scope.out.name,contact_no:$scope.out.contact_no,business:$scope.businessId}},void Businesses.post($scope.business._links.self.href+"/outlets",new_data).then(function(res){"object"==typeof res&&201===res.status&&$timeout(function(){return location.reload()},300)},function(error){return alert(error.status+" : Try again later")}))},$scope.removeOutlet=function(outlet){var r;r=confirm('Do you want to delete this outlet "'+outlet.name+'"?'),r===!0&&Businesses["delete"](outlet._links.self.href).then(function(res){"object"==typeof res&&204===res.status&&$timeout(function(){return window.location.reload()},300)},function(error){return alert(error.status+": Error, refresh & try again !")})},$scope.submitNewPromotion=function(){var effective_from,expire_on,new_data;return angular.forEach($scope.frm_create_promotion.$error.required,function(field){return field.$dirty=!0}),$scope.frm_create_promotion.$error.required.length||!$scope.frm_create_promotion.$valid?!1:(new_data={promotion:{title:$scope.promotion.title,estimated_value:$scope.promotion.estimated_value,discount_amount:$scope.promotion.discount_amount||0,offer_limit:$scope.promotion.offer_limit||0,weekly_limit:$scope.promotion.weekly_limit||0,monthly_limit:$scope.promotion.monthly_limit||0,yearly_limit:$scope.promotion.yearly_limit||0,organisation_limit:$scope.promotion.organisation_limit||0,user_limit:$scope.promotion.user_limit,enabled:$scope.promotion.enabled,type:$scope.promotion.type,business:$scope.businessId,every_outlet_included:!0}},effective_from=$scope.promotion.effective_from||"",""!==effective_from&&(effective_from=$filter("date")(new Date(effective_from),"yyyy-MM-ddT00:00:00+0000"),new_data.promotion.effective_from=effective_from),expire_on=$scope.promotion.expire_on||"",""!==expire_on&&(expire_on=$filter("date")(new Date(expire_on),"yyyy-MM-ddT00:00:00+0000"),new_data.promotion.expire_on=expire_on),void Businesses.post(_URL.post_promotions,new_data).then(function(res){"object"==typeof res&&201===res.status&&$timeout(function(){return location.reload()},300)},function(error){return alert(error.status+" : Try again later")}))},$scope.openStartDatepicker=function($event){return $event.preventDefault(),$event.stopPropagation(),$scope.datepickerStartOpened=!0},$scope.openEndDatepicker=function($event){return $event.preventDefault(),$event.stopPropagation(),$scope.datepickerEndOpened=!0},_getTypes=function(){return Businesses.get(_URL.types).then(function(res){return 200===res.status&&"object"==typeof res?res.data._embedded.items.length>0?$scope.promotionTypes=res.data._embedded.items:$scope.promotionTypes=[]:void 0},function(error){return void 0})},_getTypes(),$scope.removePromotion=function(promotion){var r;r=confirm('Do you want to delete this promotion "'+promotion.title+'"?'),r===!0&&Businesses["delete"](promotion._links.self.href).then(function(res){"object"==typeof res&&204===res.status&&$timeout(function(){return window.location.reload()},300)},function(error){return alert(error.status+": Error, refresh & try again !")})},_getBusiness()):void(location.href="#/merchant/"+$scope.clientId+"/business")}]).controller("OutletCtrl",["$scope","$filter","fetchTabData","$location","$routeParams","config","$q","$modal","Businesses","$timeout",function($scope,$filter,fetchTabData,$location,$routeParams,config,$q,$modal,Businesses,$timeout){var _URL,_getOutlet,_post_address,_post_location,_put_address;return $scope.clientId=$routeParams.clientId,$scope.businessId=$routeParams.businessId?$routeParams.businessId.trim():!1,$scope.outletId=$routeParams.outletId?$routeParams.outletId.trim():!1,$scope.businessId?$scope.outletId?(_URL={detail:config.path.baseURL+"/businesses/"+$scope.businessId+"/outlets/"+$scope.outletId,address_post:config.path.baseURL+"/addresses"},_getOutlet=function(){return Businesses.get(_URL.detail).then(function(out){return 200===out.status&&"object"==typeof out?($scope.outlet=out.data,$scope.outlet.address_text="",out.data._links.location?Businesses.get(out.data._links.location.href).then(function(loc){return 200===loc.status&&"object"==typeof loc?($scope.outlet.location=loc.data,$scope.outlet.location_latlng=loc.data.geo_lat+" , "+loc.data.geo_lng,void(loc.data._links.addresses&&Businesses.get(loc.data._links.addresses.href).then(function(add){return 200===add.status&&"object"==typeof add?($scope.outlet.location.address=add.data._embedded.items[0],$scope.outlet.address_text=add.data._embedded.items[0].value):void 0},function(error){return void 0}))):void 0},function(error){return void 0}):void 0):void 0},function(error){return void 0})},$scope.isDisable=!0,$scope.updateOutlet=function(){var new_data,new_location;return angular.forEach($scope.frm_update_outlet.$error.required,function(field){return field.$dirty=!0}),$scope.frm_update_outlet.$error.required.length||!$scope.frm_update_outlet.$valid?!1:(new_data={outlet:{name:$scope.outlet.name,contact_no:$scope.outlet.contact_no}},$scope.send_data=new_data,$scope.outlet.location?(new_data={outlet:{name:$scope.outlet.name,contact_no:$scope.outlet.contact_no,business:$scope.businessId,location:$scope.outlet.location.id}},new_location={location:{name:$scope.outlet.location.name,geo_lat:$scope.resultmap.lat,geo_lng:$scope.resultmap["long"],enabled:1}},Businesses.put(_URL.detail,new_data).then(function(res){return"object"==typeof res&&204===res.status?new_location?Businesses.put($scope.outlet.location._links.self.href,new_location).then(function(loc){return"object"==typeof loc&&204===loc.status?($scope.outlet.location._links.addresses?_put_address($scope.outlet.location,$scope.outlet.location.address):_post_address($scope.outlet.location.id,$scope.outlet.address_text),$scope.infoUpdated="Update Successfully!"):void 0}):$scope.infoUpdated="Update Successfully!":void 0},function(error){return alert(error.status+" : Error, refresh & try again !")}),void 0):(new_location={location:{name:$scope.outlet.address_text,geo_lat:$scope.resultmap.lat,geo_lng:$scope.resultmap["long"],enabled:1}},$q.all([_post_location(new_location,$scope.outlet)]).then(function(data){return new_data={outlet:{name:$scope.outlet.name,contact_no:$scope.outlet.contact_no,business:$scope.businessId,location:data[0]}},_post_address(data[0],$scope.outlet.address_text),Businesses.put(_URL.detail,new_data).then(function(res){return"object"==typeof res&&204===res.status?$scope.infoUpdated="Update Successfully!":void 0},function(error){return alert(error.status+" : Error, refresh & try again !")})})))},_post_location=function(location,outlet){var deferred;return deferred=$q.defer(),outlet._links["location.post"]&&Businesses.post(outlet._links["location.post"].href,location).then(function(loc){var location_id;return"object"==typeof loc&&201===loc.status?(location_id=loc.headers().location.split("/")[2],deferred.resolve(location_id)):void 0},function(error){return alert(error.status+" : Cannot create location!")}),deferred.promise},_post_address=function(location_id,value){var new_address;return new_address={address:{value:value,location:location_id}},location_id?Businesses.post(_URL.address_post,new_address).then(function(add){},function(error){return alert(error.status+" : Cannot create address !")}):void 0},_put_address=function(location,address){var new_address;return new_address={address:{value:$scope.outlet.address_text,location:location.id}},address._links.self?Businesses.put(address._links.self.href,new_address).then(function(add){},function(error){return alert(error.status+" : Cannot update address !")}):void 0},$scope.deleteOutlet=function(){var r;r=confirm('Do you want to delete this outlet "'+$scope.outlet.name+'"?'),r===!0&&Businesses["delete"]($scope.outlet._links.self.href).then(function(res){"object"==typeof res&&204===res.status&&($scope.infoUpdated="Deleted business successfully!",$timeout(function(){var businessId,clientId;return clientId=$routeParams.clientId,businessId=$routeParams.businessId,$location.path("/merchant/"+clientId+"/business/"+businessId)},300))},function(error){return $scope.infoUpdated=error.status+": Error, refresh & try again !"})},_getOutlet()):void(location.href="#/merchant/"+$scope.clientId+"/business/"+$scope.businessId):void(location.href="#/merchant/"+$scope.clientId+"/business")}]).controller("PromotionCtrl",["$scope","$filter","fetchTabData","$location","$routeParams","config","$q","$modal","Businesses","$timeout",function($scope,$filter,fetchTabData,$location,$routeParams,config,$q,$modal,Businesses,$timeout){var _URL,_getPromotion,_getTypes;return $scope.clientId=$routeParams.clientId,$scope.businessId=$routeParams.businessId?$routeParams.businessId.trim():!1,$scope.promotionId=$routeParams.promotionId?$routeParams.promotionId.trim():!1,$scope.businessId?$scope.promotionId?(_URL={detail:config.path.baseURL+"/promotions/"+$scope.promotionId,types:config.path.baseURL+"/promotion/types",outlets:config.path.baseURL+"/businesses/"+$scope.businessId+"/outlets"
},_getPromotion=function(){return Businesses.get(_URL.detail).then(function(pro){return 200===pro.status&&"object"==typeof pro?($scope.promotion=pro.data,pro.data._links.type&&Businesses.get(pro.data._links.type.href).then(function(type){return 200===type.status&&"object"==typeof type?$scope.promotion.type=type.data.id:void 0},function(error){return void 0}),pro.data._links.retail_outlets?Businesses.get(pro.data._links.retail_outlets.href).then(function(out){return 200===out.status&&"object"==typeof out?$scope.promotion.outlets=out.data._embedded.items:void 0},function(error){return void 0}):void 0):void 0},function(error){return void 0})},$scope.openStartDatepicker=function($event){return $event.preventDefault(),$event.stopPropagation(),$scope.datepickerStartOpened=!0},$scope.openEndDatepicker=function($event){return $event.preventDefault(),$event.stopPropagation(),$scope.datepickerEndOpened=!0},_getTypes=function(){return Businesses.get(_URL.types).then(function(res){return 200===res.status&&"object"==typeof res?res.data._embedded.items.length>0?$scope.promotionTypes=res.data._embedded.items:$scope.promotionTypes=[]:void 0},function(error){return void 0})},_getTypes(),$scope.isDisable=!0,$scope.updatePromotion=function(){var effective_from,expire_on,new_data;return angular.forEach($scope.frm_update_promotion.$error.required,function(field){return field.$dirty=!0}),$scope.frm_update_promotion.$error.required.length||!$scope.frm_update_promotion.$valid?!1:(new_data={promotion:{title:$scope.promotion.title,discount_amount:$scope.promotion.discount_amount||0,estimated_value:$scope.promotion.estimated_value,offer_limit:$scope.promotion.offer_limit||0,weekly_limit:$scope.promotion.weekly_limit||0,monthly_limit:$scope.promotion.monthly_limit||0,yearly_limit:$scope.promotion.yearly_limit||0,organisation_limit:$scope.promotion.organisation_limit||0,user_limit:$scope.promotion.user_limit,enabled:$scope.promotion.enabled,type:$scope.promotion.type,business:$scope.businessId}},effective_from=$scope.promotion.effective_from||"",""!==effective_from&&(effective_from=$filter("date")(new Date(effective_from),"yyyy-MM-ddT00:00:00+0000"),new_data.promotion.effective_from=effective_from),expire_on=$scope.promotion.expire_on||"",""!==expire_on&&(expire_on=$filter("date")(new Date(expire_on),"yyyy-MM-ddT00:00:00+0000"),new_data.promotion.expire_on=expire_on),void Businesses.put($scope.promotion._links.self.href,new_data).then(function(res){return"object"==typeof res&&204===res.status?$scope.infoUpdated="Update Successfully!":void 0},function(error){return alert(error.status+" : Error, refresh & try again !")}))},$scope.deletePromotion=function(){var r;r=confirm('Do you want to delete this promotion "'+$scope.promotion.title+'"?'),r===!0&&Businesses["delete"]($scope.promotion._links.self.href).then(function(res){"object"==typeof res&&204===res.status&&($scope.infoUpdated="Deleted promotion successfully!",$timeout(function(){var businessId,clientId;return clientId=$routeParams.clientId,businessId=$routeParams.businessId,$location.path("/merchant/"+clientId+"/business/"+businessId)},300))},function(error){return $scope.infoUpdated=error.status+": Error, refresh & try again !"})},$scope.getOutlets=function(query){return Businesses.get(_URL.outlets+"?limit=99999").then(function(res){return 200!==res.status||"object"!=typeof res?[]:res.data._embedded.items.length>0?res.data._embedded.items:[]},function(error){return void 0})},$scope.insertNewOutlet=function(){var new_data;return angular.forEach($scope.frm_create_outlet.$error.required,function(field){return field.$dirty=!0}),$scope.frm_create_outlet.$error.required.length||!$scope.frm_create_outlet.$valid?!1:$scope.outlets.chosenList.length<=0?($scope.displayError=!0,!1):(new_data={promotion:{title:$scope.promotion.title,discount_amount:$scope.promotion.discount_amount||0,estimated_value:$scope.promotion.estimated_value,offer_limit:$scope.promotion.offer_limit||0,weekly_limit:$scope.promotion.weekly_limit||0,monthly_limit:$scope.promotion.monthly_limit||0,yearly_limit:$scope.promotion.yearly_limit||0,organisation_limit:$scope.promotion.organisation_limit||0,user_limit:$scope.promotion.user_limit,effective_from:$scope.promotion.effective_from,expire_on:$scope.promotion.expire_on,enabled:$scope.promotion.enabled,type:$scope.promotion.type,business:$scope.businessId}},new_data.promotion.retail_outlets=[],void 0!==$scope.promotion.outlets&&$scope.promotion.outlets.length>0&&angular.forEach($scope.promotion.outlets,function(outlet){return new_data.promotion.retail_outlets.push(outlet.id)}),angular.forEach($scope.outlets.chosenList,function(outlet){return-1===new_data.promotion.retail_outlets.indexOf(outlet.id)?new_data.promotion.retail_outlets.push(outlet.id):void 0}),$scope.insertData=new_data,void Businesses.put($scope.promotion._links.self.href,new_data).then(function(res){return"object"==typeof res&&204===res.status?($scope.infoUpdated="Update Successfully!",$timeout(function(){return location.reload()},300)):void 0},function(error){return alert(error.status+" : Error, refresh & try again !")}))},$scope.removeOutlet=function(outlet){var new_data,r;r=confirm('Do you want to remove this outlet "'+outlet.name+'"?'),r===!0&&(new_data={promotion:{title:$scope.promotion.title,discount_amount:$scope.promotion.discount_amount||0,estimated_value:$scope.promotion.estimated_value,offer_limit:$scope.promotion.offer_limit||0,weekly_limit:$scope.promotion.weekly_limit||0,monthly_limit:$scope.promotion.monthly_limit||0,yearly_limit:$scope.promotion.yearly_limit||0,organisation_limit:$scope.promotion.organisation_limit||0,user_limit:$scope.promotion.user_limit,effective_from:$scope.promotion.effective_from,expire_on:$scope.promotion.expire_on,enabled:$scope.promotion.enabled,type:$scope.promotion.type,business:$scope.businessId}},new_data.promotion.retail_outlets=[],$scope.promotion.outlets.length>0&&angular.forEach($scope.promotion.outlets,function(out){return out.id!==outlet.id?new_data.promotion.retail_outlets.push(out.id):void 0}),Businesses.put($scope.promotion._links.self.href,new_data).then(function(res){return"object"==typeof res&&204===res.status?($scope.infoUpdated="Delete Successfully!",$timeout(function(){return location.reload()},300)):void 0},function(error){return alert(error.status+" : Error, refresh & try again !")}))},_getPromotion()):void(location.href="#/merchant/"+$scope.clientId+"/business/"+$scope.businessId):void(location.href="#/merchant/"+$scope.clientId+"/business")}])}.call(this),function(){"use strict";angular.module("app.businesses.services",[]).factory("Businesses",["$http","$q","$resource",function($http,$q,$resource){return{get:function(url){var d;return d=$q.defer(),$http({method:"GET",url:url}).then(function(res){d.resolve(res)},function(error){d.reject(error)}),d.promise},post:function(url,data){var d;return d=$q.defer(),$http({method:"POST",url:url,data:data}).then(function(res){d.resolve(res)},function(error){d.reject(error)}),d.promise},put:function(url,data){var d;return d=$q.defer(),$http({method:"PUT",url:url,data:data}).then(function(res){d.resolve(res)},function(error){d.reject(error)}),d.promise},"delete":function(url){var d;return d=$q.defer(),$http({method:"DELETE",url:url}).then(function(res){d.resolve(res)},function(error){d.reject(error)}),d.promise}}}])}.call(this),function(){"use strict";angular.module("app.merchants",[]).controller("merchantCtrl",["$scope","$filter","$location","$routeParams","config","Companies",function($scope,$filter,$location,$routeParams,config,Companies){var _getCompanies;_getCompanies=function(limit,goPage){return Companies.get(config.path.baseURL+config.path.clients+"?limit="+limit+"&page="+goPage).then(function(res){200===res.status&&"object"==typeof res&&($scope.companies=res.data,$scope.companies.items=res.data._embedded.items)},function(error){return void 0})},$scope.numPerPageOpt=[3,5,10,20],$scope.numPerPage=$scope.numPerPageOpt[2],$scope.currentPage=1,$scope.filteredUsers=[],$scope.currentPageUsers=[],$scope.onNPPChange=function(){return _getCompanies($scope.numPerPage,$scope.currentPage)},$scope.gotoPage=function(page){return _getCompanies($scope.numPerPage,$scope.currentPage)},_getCompanies($scope.numPerPage,$scope.currentPage)}]).controller("merchantDetailCtrl",["$scope","$filter","$location","$routeParams","config","Companies",function($scope,$filter,$location,$routeParams,config,Companies){var i,item,_getCompany,_prefix_url,_ref;$scope.clientId=$routeParams.clientId,_getCompany=function(clientId){return Companies.get(config.path.baseURL+config.path.clients+"/"+clientId).then(function(res){200===res.status&&"object"==typeof res&&($scope.client=res.data)},function(error){return void 0})},$scope.isActive=function(path){return $location.path().search(path)>=0?"active":void 0},_prefix_url="#/merchant/"+$scope.clientId,$scope.page_tabUrls={business:_prefix_url+"/business",info:_prefix_url+"/info",outlets:_prefix_url+"/outlets",offers:_prefix_url+"/offers",reports:_prefix_url+"/reports",campaigns:_prefix_url+"/campaigns"},$scope.offer_items=[{id:1,name:"Main course"},{id:2,name:"Main course 2"},{id:3,name:"Main course 3"}],_ref=$scope.offer_items;for(i in _ref)item=_ref[i],$scope.offer_items[i].open_frm=0;$scope.op_form=function(key){$scope.offer_items[key].open_frm=!$scope.offer_items[key].open_frm},$scope.validForm=function(index){return $scope.offer_items[index].ipt={},!$scope.offer_items[index].name||$scope.offer_items[index].name&&$scope.offer_items[index].name.length<4?$scope.offer_items[index].ipt.name="error":void 0},$scope.open=function($event,index){return $event.preventDefault(),$event.stopPropagation(),$scope.offer_items[index].effdate={},$scope.offer_items[index].effdate.opened=!0},$scope.expire=function($event,index){return $event.preventDefault(),$event.stopPropagation(),$scope.offer_items[index].expdate={},$scope.offer_items[index].expdate.opened=!0},$scope.minDate=new Date,_getCompany($scope.clientId)}])}.call(this),function(){"use strict";angular.module("app.merchants.html",[]).factory("taskStorage2",function(){var DEMO_TASKS,STORAGE_ID;return STORAGE_ID="tasks",DEMO_TASKS='[ {"title": "Finish homework", "completed": true}, {"title": "Make a call", "completed": true}, {"title": "Build a snowman :)", "completed": false}, {"title": "Apply for monster university!", "completed": false}, {"title": "Play games with friends", "completed": true}, {"title": "Shopping", "completed": false}, {"title": "One more dance", "completed": false}, {"title": "Try Google glass", "completed": false} ]',{get:function(){return JSON.parse(localStorage.getItem(STORAGE_ID)||DEMO_TASKS)},put:function(tasks){return localStorage.setItem(STORAGE_ID,JSON.stringify(tasks))}}}).controller("merchantsCtrl",["$scope","$filter",function($scope,$filter){var init;return $scope.stores=[{id:1,company:"BullWorks Pte Ltd",store:"Converser",type:"AAA",cat:"Euro",outlets:"None",cs:2,status:"Live",action:"Manage"},{id:2,company:"Resort world",store:"Converser2",type:"BBB",cat:"CCC",outlets:"None",cs:2,status:"Live",action:"Manage"},{id:3,company:"Nijiya Market",store:"TTT",type:"BNM",cat:"Euro",outlets:"None",cs:2,status:"Live",action:"Manage"}],$scope.searchKeywords="",$scope.filteredStores=[],$scope.row="",$scope.select=function(page){var end,start;return start=(page-1)*$scope.numPerPage,end=start+$scope.numPerPage,$scope.currentPageStores=$scope.filteredStores.slice(start,end)},$scope.onFilterChange=function(){return $scope.select(1),$scope.currentPage=1,$scope.row=""},$scope.onNumPerPageChange=function(){return $scope.select(1),$scope.currentPage=1},$scope.onOrderChange=function(){return $scope.select(1),$scope.currentPage=1},$scope.search=function(){return $scope.filteredStores=$filter("filter")($scope.stores,$scope.searchKeywords),$scope.onFilterChange()},$scope.order=function(rowName){return $scope.row!==rowName?($scope.row=rowName,$scope.filteredStores=$filter("orderBy")($scope.stores,rowName),$scope.onOrderChange()):void 0},$scope.numPerPageOpt=[3,5,10,20],$scope.numPerPage=$scope.numPerPageOpt[2],$scope.currentPage=1,$scope.currentPageStores=[],init=function(){return $scope.search(),$scope.select($scope.currentPage)},init(),$scope.tabConfig=[{id:"cpi",baseUrl:"views/merchants/tab_company.html"},{id:"ol",baseUrl:"views/merchants/tab_outlet.html"},{id:"of",baseUrl:"views/merchants/tab_offer.html"},{id:"rp",baseUrl:"views/merchants/tab_report.html"},{id:"cpa",baseUrl:"views/merchants/tab_compaign.html"}],$scope.selectTab=function(tabIndex){return $scope.selectedTabIndex=tabIndex,fetchTabData.tabFetchDataByIndex($scope.tabConfig[tabIndex]).then(function(res){return $scope.tabData=res.response})},$scope.merchants_edit="Edit",$scope.CheckDisabled=function(){return $scope.isDisable=!$scope.isDisable,$scope.isDisable?$scope.merchants_edit="Update":$scope.merchants_edit="Edit"}}]).controller("TabsMerchantCtrl",["$scope",function($scope){return $scope.tabs=[{title:"Company",content:"Dynamic content 1.  Consectetur adipisicing elit. Nihil, quidem, officiis, et ex laudantium sed cupiditate voluptatum libero nobis sit illum voluptates beatae ab. Ad, repellendus non sequi et at.",html:"<h1>Hai</h1>"},{title:"Disabled",content:"Dynamic content 2.  Lorem ipsum dolor sit amet, consectetur adipisicing elit. Nihil, quidem, officiis, et ex laudantium sed cupiditate voluptatum libero nobis sit illum voluptates beatae ab. Ad, repellendus non sequi et at.",disabled:!0}],$scope.html="<h1>Hai</h1>",$scope.navType="pills"}])}.call(this),function(){"use strict";angular.module("app.maps.directives",[]).directive("ngGmap",[function(){var geocoder,gmapCtrl,gmapLink,infoWindow,latLng,map,map_fn,marker,_scope;return geocoder=new google.maps.Geocoder,map=void 0,latLng=void 0,marker=void 0,infoWindow=void 0,_scope=null,map_fn={initMap:function(mapID,lat,lng,hideinfo,scope){var myOptions;myOptions={zoom:12,panControl:!1,streetViewControl:!1,mapTypeId:google.maps.MapTypeId.ROADMAP,mapTypeControl:!1},map=new google.maps.Map(document.getElementById(mapID),myOptions),latLng=new google.maps.LatLng(lat,lng),map.setCenter(latLng),marker=new google.maps.Marker({position:latLng,map:map,draggable:!0,animation:google.maps.Animation.DROP}),infoWindow=new google.maps.InfoWindow({content:'<div id="iw"><strong>Instructions:</strong><br /><br />Click and drag this red marker anywhere to know the approximate postal address of that location.</div>'}),hideinfo?map_fn.geocode(latLng,scope):infoWindow.open(map,marker),google.maps.event.addListener(marker,"dragstart",function(e){infoWindow.close()}),google.maps.event.addListener(marker,"dragend",function(e){var point;point=marker.getPosition(),map.panTo(point),map_fn.geocode(point,scope)})},showAddress:function(val,scope){infoWindow.close(),geocoder.geocode({address:val},function(results,status){status===google.maps.GeocoderStatus.OK&&(marker.setPosition(results[0].geometry.location),map_fn.geocode(results[0].geometry.location,scope))})},geocode:function(position,scope){var aLatlng;return"number"==typeof position.lat&&(aLatlng=new google.maps.LatLng(position.lat,position.lng),marker.setPosition(aLatlng)),geocoder.geocode({latLng:position},function(responses){var html;html="",html+=responses&&responses.length>0?"<h3>Postal Address</h3><hr/>"+responses[0].formatted_address:"Sorry but Google Maps could not determine the approximate postal address of this location.",html+="<hr />Latitude : "+marker.getPosition().lat()+"<br/>Longitude: "+marker.getPosition().lng(),map.panTo(marker.getPosition()),infoWindow.setContent("<div id='iw'>"+html+"</div>"),infoWindow.open(map,marker),$(".txt-location").val(marker.getPosition().lat()+" , "+marker.getPosition().lng()),scope.$apply(function(){return scope.result={"long":marker.getPosition().lng(),lat:marker.getPosition().lat()}})})}},gmapLink=function(scope,element,attrs){var address_val,map_id,nlat,nlog;void 0===scope.data?(nlat=41.85,nlog=-87.65):(nlat=scope.data.geo_lat,nlog=scope.data.geo_lng),map_id=$(element).find(".load-map").attr("id"),map_fn.initMap(map_id,nlat,nlog,!1,scope),address_val=$(element).closest(".col-md-6").siblings(".col-md-6").find(".txt-address").val(),scope.$watch("data",function(nv){var geo_position;return nv?(geo_position={lat:nv.geo_lat,lng:nv.geo_lng},map_fn.geocode(geo_position,scope)):void 0}),map_fn.showAddress(address_val,scope),$(".get_address").on("click",function(){var add_val;return add_val=$(this).siblings(".txt-address").val(),map_fn.showAddress(add_val,scope)})},gmapCtrl=["$scope","$http","$timeout",function($scope,$http,$timeout){$scope.result={},$scope.$watch("result",function(nv){return nv?$scope.result=nv:void 0})}],{restrict:"E",scope:{data:"=",result:"=ngResultmap"},templateUrl:"views/merchant/detail_outlets/ng_gmap.html",controller:gmapCtrl,link:gmapLink}}])}.call(this),function(){"use strict";angular.module("app.page.ctrls",[]).controller("invoiceCtrl",["$scope","$window",function($scope,$window){return $scope.printInvoice=function(){var originalContents,popupWin,printContents;return printContents=document.getElementById("invoice").innerHTML,originalContents=document.body.innerHTML,popupWin=window.open(),popupWin.document.open(),popupWin.document.write('<html><head><link rel="stylesheet" type="text/css" href="styles/main.css" /></head><body onload="window.print()">'+printContents+"</html>"),popupWin.document.close()}}])}.call(this),function(){"use strict";angular.module("app.tables",[]).controller("tableCtrl",["$scope","$filter",function($scope,$filter){var init;return $scope.stores=[{name:"Nijiya Market",price:"$$",sales:292,rating:4},{name:"Eat On Monday Truck",price:"$",sales:119,rating:4.3},{name:"Tea Era",price:"$",sales:874,rating:4},{name:"Rogers Deli",price:"$",sales:347,rating:4.2},{name:"MoBowl",price:"$$$",sales:24,rating:4.6},{name:"The Milk Pail Market",price:"$",sales:543,rating:4.5},{name:"Nob Hill Foods",price:"$$",sales:874,rating:4},{name:"Scratch",price:"$$$",sales:643,rating:3.6},{name:"Gochi Japanese Fusion Tapas",price:"$$$",sales:56,rating:4.1},{name:"Cost Plus World Market",price:"$$",sales:79,rating:4},{name:"Bumble Bee Health Foods",price:"$$",sales:43,rating:4.3},{name:"Costco",price:"$$",sales:219,rating:3.6},{name:"Red Rock Coffee Co",price:"$",sales:765,rating:4.1},{name:"99 Ranch Market",price:"$",sales:181,rating:3.4},{name:"Mi Pueblo Food Center",price:"$",sales:78,rating:4},{name:"Cucina Venti",price:"$$",sales:163,rating:3.3},{name:"Sufi Coffee Shop",price:"$",sales:113,rating:3.3},{name:"Dana Street Roasting",price:"$",sales:316,rating:4.1},{name:"Pearl Cafe",price:"$",sales:173,rating:3.4},{name:"Posh Bagel",price:"$",sales:140,rating:4},{name:"Artisan Wine Depot",price:"$$",sales:26,rating:4.1},{name:"Hong Kong Chinese Bakery",price:"$",sales:182,rating:3.4},{name:"Starbucks",price:"$$",sales:97,rating:3.7},{name:"Tapioca Express",price:"$",sales:301,rating:3},{name:"House of Bagels",price:"$",sales:82,rating:4.4}],$scope.searchKeywords="",$scope.filteredStores=[],$scope.row="",$scope.select=function(page){var end,start;return start=(page-1)*$scope.numPerPage,end=start+$scope.numPerPage,$scope.currentPageStores=$scope.filteredStores.slice(start,end)},$scope.onFilterChange=function(){return $scope.select(1),$scope.currentPage=1,$scope.row=""},$scope.onNumPerPageChange=function(){return $scope.select(1),$scope.currentPage=1},$scope.onOrderChange=function(){return $scope.select(1),$scope.currentPage=1},$scope.search=function(){return $scope.filteredStores=$filter("filter")($scope.stores,$scope.searchKeywords),$scope.onFilterChange()},$scope.order=function(rowName){return $scope.row!==rowName?($scope.row=rowName,$scope.filteredStores=$filter("orderBy")($scope.stores,rowName),$scope.onOrderChange()):void 0},$scope.numPerPageOpt=[3,5,10,20],$scope.numPerPage=$scope.numPerPageOpt[2],$scope.currentPage=1,$scope.currentPageStores=[],(init=function(){return $scope.search(),$scope.select($scope.currentPage)})()}])}.call(this),function(){"use strict";angular.module("app.task",[]).factory("taskStorage",function(){var DEMO_TASKS,STORAGE_ID;return STORAGE_ID="tasks",DEMO_TASKS='[ {"title": "Finish homework", "completed": true}, {"title": "Make a call", "completed": true}, {"title": "Build a snowman :)", "completed": false}, {"title": "Apply for monster university!", "completed": false}, {"title": "Play games with friends", "completed": true}, {"title": "Shopping", "completed": false}, {"title": "One more dance", "completed": false}, {"title": "Try Google glass", "completed": false} ]',{get:function(){return JSON.parse(localStorage.getItem(STORAGE_ID)||DEMO_TASKS)},put:function(tasks){return localStorage.setItem(STORAGE_ID,JSON.stringify(tasks))}}}).directive("taskFocus",["$timeout",function($timeout){return{link:function(scope,ele,attrs){return scope.$watch(attrs.taskFocus,function(newVal){return newVal?$timeout(function(){return ele[0].focus()},0,!1):void 0})}}}]).controller("taskCtrl",["$scope","taskStorage","filterFilter","$rootScope","logger",function($scope,taskStorage,filterFilter,$rootScope,logger){var tasks;return tasks=$scope.tasks=taskStorage.get(),$scope.newTask="",$scope.remainingCount=filterFilter(tasks,{completed:!1}).length,$scope.editedTask=null,$scope.statusFilter={completed:!1},$scope.filter=function(filter){switch(filter){case"all":return $scope.statusFilter="";case"active":return $scope.statusFilter={completed:!1};case"completed":return $scope.statusFilter={completed:!0}}},$scope.add=function(){var newTask;return newTask=$scope.newTask.trim(),0!==newTask.length?(tasks.push({title:newTask,completed:!1}),logger.logSuccess('New task: "'+newTask+'" added'),taskStorage.put(tasks),$scope.newTask="",$scope.remainingCount++):void 0},$scope.edit=function(task){return $scope.editedTask=task},$scope.doneEditing=function(task){return $scope.editedTask=null,task.title=task.title.trim(),task.title?logger.log("Task updated"):$scope.remove(task),taskStorage.put(tasks)},$scope.remove=function(task){var index;return $scope.remainingCount-=task.completed?0:1,index=$scope.tasks.indexOf(task),$scope.tasks.splice(index,1),taskStorage.put(tasks),logger.logError("Task removed")},$scope.completed=function(task){return $scope.remainingCount+=task.completed?-1:1,taskStorage.put(tasks),task.completed?$scope.remainingCount>0?1===$scope.remainingCount?logger.log("Almost there! Only "+$scope.remainingCount+" task left"):logger.log("Good job! Only "+$scope.remainingCount+" tasks left"):logger.logSuccess("Congrats! All done :)"):void 0},$scope.clearCompleted=function(){return $scope.tasks=tasks=tasks.filter(function(val){return!val.completed}),taskStorage.put(tasks)},$scope.markAll=function(completed){return tasks.forEach(function(task){return task.completed=completed}),$scope.remainingCount=completed?0:tasks.length,taskStorage.put(tasks),completed?logger.logSuccess("Congrats! All done :)"):void 0},$scope.$watch("remainingCount == 0",function(val){return $scope.allChecked=val}),$scope.$watch("remainingCount",function(newVal,oldVal){return $rootScope.$broadcast("taskRemaining:changed",newVal)})}])}.call(this),function(){"use strict";angular.module("app.ui.map",[]).directive("uiJqvmap",[function(){return{restrict:"A",scope:{options:"="},link:function(scope,ele,attrs){var options;return options=scope.options,ele.vectorMap(options)}}}]).controller("jqvmapCtrl",["$scope",function($scope){var sample_data;return sample_data={af:"16.63",al:"11.58",dz:"158.97",ao:"85.81",ag:"1.1",ar:"351.02",am:"8.83",au:"1219.72",at:"366.26",az:"52.17",bs:"7.54",bh:"21.73",bd:"105.4",bb:"3.96",by:"52.89",be:"461.33",bz:"1.43",bj:"6.49",bt:"1.4",bo:"19.18",ba:"16.2",bw:"12.5",br:"2023.53",bn:"11.96",bg:"44.84",bf:"8.67",bi:"1.47",kh:"11.36",cm:"21.88",ca:"1563.66",cv:"1.57",cf:"2.11",td:"7.59",cl:"199.18",cn:"5745.13",co:"283.11",km:"0.56",cd:"12.6",cg:"11.88",cr:"35.02",ci:"22.38",hr:"59.92",cy:"22.75",cz:"195.23",dk:"304.56",dj:"1.14",dm:"0.38","do":"50.87",ec:"61.49",eg:"216.83",sv:"21.8",gq:"14.55",er:"2.25",ee:"19.22",et:"30.94",fj:"3.15",fi:"231.98",fr:"2555.44",ga:"12.56",gm:"1.04",ge:"11.23",de:"3305.9",gh:"18.06",gr:"305.01",gd:"0.65",gt:"40.77",gn:"4.34",gw:"0.83",gy:"2.2",ht:"6.5",hn:"15.34",hk:"226.49",hu:"132.28",is:"12.77","in":"1430.02",id:"695.06",ir:"337.9",iq:"84.14",ie:"204.14",il:"201.25",it:"2036.69",jm:"13.74",jp:"5390.9",jo:"27.13",kz:"129.76",ke:"32.42",ki:"0.15",kr:"986.26",undefined:"5.73",kw:"117.32",kg:"4.44",la:"6.34",lv:"23.39",lb:"39.15",ls:"1.8",lr:"0.98",ly:"77.91",lt:"35.73",lu:"52.43",mk:"9.58",mg:"8.33",mw:"5.04",my:"218.95",mv:"1.43",ml:"9.08",mt:"7.8",mr:"3.49",mu:"9.43",mx:"1004.04",md:"5.36",mn:"5.81",me:"3.88",ma:"91.7",mz:"10.21",mm:"35.65",na:"11.45",np:"15.11",nl:"770.31",nz:"138",ni:"6.38",ne:"5.6",ng:"206.66",no:"413.51",om:"53.78",pk:"174.79",pa:"27.2",pg:"8.81",py:"17.17",pe:"153.55",ph:"189.06",pl:"438.88",pt:"223.7",qa:"126.52",ro:"158.39",ru:"1476.91",rw:"5.69",ws:"0.55",st:"0.19",sa:"434.44",sn:"12.66",rs:"38.92",sc:"0.92",sl:"1.9",sg:"217.38",sk:"86.26",si:"46.44",sb:"0.67",za:"354.41",es:"1374.78",lk:"48.24",kn:"0.56",lc:"1",vc:"0.58",sd:"65.93",sr:"3.3",sz:"3.17",se:"444.59",ch:"522.44",sy:"59.63",tw:"426.98",tj:"5.58",tz:"22.43",th:"312.61",tl:"0.62",tg:"3.07",to:"0.3",tt:"21.2",tn:"43.86",tr:"729.05",tm:0,ug:"17.12",ua:"136.56",ae:"239.65",gb:"2258.57",us:"14624.18",uy:"40.71",uz:"37.72",vu:"0.72",ve:"285.21",vn:"101.99",ye:"30.02",zm:"15.69",zw:"5.57"},$scope.worldMap={map:"world_en",backgroundColor:null,color:"#ffffff",hoverOpacity:.7,selectedColor:"#666666",enableZoom:!0,showTooltip:!0,values:sample_data,scaleColors:["#C8EEFF","#006491"],normalizeFunction:"polynomial"},$scope.USAMap={map:"usa_en",backgroundColor:null,color:"#ffffff",hoverColor:"#999999",selectedColor:"#666666",enableZoom:!0,showTooltip:!0,selectedRegion:"MO"},$scope.europeMap={map:"europe_en",backgroundColor:null,color:"#ffffff",hoverOpacity:.7,hoverColor:"#999999",enableZoom:!1,showTooltip:!1,values:sample_data,scaleColors:["#C8EEFF","#006491"],normalizeFunction:"polynomial"}}])}.call(this),function(){"use strict";angular.module("app.ui.ctrls",[]).controller("NotifyCtrl",["$scope","logger",function($scope,logger){return $scope.notify=function(type){switch(type){case"info":return logger.log("Heads up! This alert needs your attention, but it's not super important.");case"success":return logger.logSuccess("Well done! You successfully read this important alert message.");case"warning":return logger.logWarning("Warning! Best check yo self, you're not looking too good.");case"error":return logger.logError("Oh snap! Change a few things up and try submitting again.")}}}]).controller("AlertDemoCtrl",["$scope",function($scope){return $scope.alerts=[{type:"success",msg:"Well done! You successfully read this important alert message."},{type:"info",msg:"Heads up! This alert needs your attention, but it is not super important."},{type:"warning",msg:"Warning! Best check yo self, you're not looking too good."},{type:"danger",msg:"Oh snap! Change a few things up and try submitting again."}],$scope.addAlert=function(){var num,type;switch(num=Math.ceil(4*Math.random()),type=void 0,num){case 0:type="info";break;case 1:type="success";break;case 2:type="info";break;case 3:type="warning";break;case 4:type="danger"}return $scope.alerts.push({type:type,msg:"Another alert!"})},$scope.closeAlert=function(index){return $scope.alerts.splice(index,1)}}]).controller("ProgressDemoCtrl",["$scope",function($scope){return $scope.max=200,$scope.random=function(){var type,value;value=Math.floor(100*Math.random()+10),type=void 0,type=25>value?"success":50>value?"info":75>value?"warning":"danger",$scope.showWarning="danger"===type||"warning"===type,$scope.dynamic=value,$scope.type=type},$scope.random()}]).controller("AccordionDemoCtrl",["$scope",function($scope){$scope.oneAtATime=!0,$scope.groups=[{title:"Dynamic Group Header - 1",content:"Dynamic Group Body - 1"},{title:"Dynamic Group Header - 2",content:"Dynamic Group Body - 2"},{title:"Dynamic Group Header - 3",content:"Dynamic Group Body - 3"}],$scope.items=["Item 1","Item 2","Item 3"],$scope.status={isFirstOpen:!0,isFirstOpen1:!0,isFirstOpen2:!0,isFirstOpen3:!0,isFirstOpen4:!0,isFirstOpen5:!0,isFirstOpen6:!0},$scope.addItem=function(){var newItemNo;newItemNo=$scope.items.length+1,$scope.items.push("Item "+newItemNo)}}]).controller("CollapseDemoCtrl",["$scope",function($scope){return $scope.isCollapsed=!1}]).controller("ModalDemoCtrl",["$scope","$modal","$log",function($scope,$modal,$log){$scope.items=["item1","item2","item3"],$scope.open=function(){var modalInstance;modalInstance=$modal.open({templateUrl:"myModalContent.html",controller:"ModalInstanceCtrl",resolve:{items:function(){return $scope.items}}}),modalInstance.result.then(function(selectedItem){$scope.selected=selectedItem},function(){$log.info("Modal dismissed at: "+new Date)})}}]).controller("ModalInstanceCtrl",["$scope","$modalInstance","items",function($scope,$modalInstance,items){$scope.items=items,$scope.selected={item:$scope.items[0]},$scope.ok=function(){$modalInstance.close($scope.selected.item)},$scope.cancel=function(){$modalInstance.dismiss("cancel")}}]).controller("PaginationDemoCtrl",["$scope",function($scope){return $scope.totalItems=64,$scope.currentPage=4,$scope.setPage=function(pageNo){return $scope.currentPage=pageNo},$scope.maxSize=5,$scope.bigTotalItems=175,$scope.bigCurrentPage=1}]).controller("TabsDemoCtrl",["$scope",function($scope){return $scope.tabs=[{title:"Dynamic Title 1",content:"Dynamic content 1.  Consectetur adipisicing elit. Nihil, quidem, officiis, et ex laudantium sed cupiditate voluptatum libero nobis sit illum voluptates beatae ab. Ad, repellendus non sequi et at."},{title:"Disabled",content:"Dynamic content 2.  Lorem ipsum dolor sit amet, consectetur adipisicing elit. Nihil, quidem, officiis, et ex laudantium sed cupiditate voluptatum libero nobis sit illum voluptates beatae ab. Ad, repellendus non sequi et at.",disabled:!0}],$scope.navType="pills"}]).controller("TreeDemoCtrl",["$scope",function($scope){return $scope.list=[{id:1,title:"Item 1",items:[]},{id:2,title:"Item 2",items:[{id:21,title:"Item 2.1",items:[{id:211,title:"Item 2.1.1",items:[]},{id:212,title:"Item 2.1.2",items:[]}]},{id:22,title:"Item 2.2",items:[{id:221,title:"Item 2.2.1",items:[]},{id:222,title:"Item 2.2.2",items:[]}]}]},{id:3,title:"Item 3",items:[]},{id:4,title:"Item 4",items:[{id:41,title:"Item 4.1",items:[]}]},{id:5,title:"Item 5",items:[]},{id:6,title:"Item 6",items:[]},{id:7,title:"Item 7",items:[]}],$scope.selectedItem={},$scope.options={},$scope.remove=function(scope){scope.remove()},$scope.toggle=function(scope){scope.toggle()},$scope.newSubItem=function(scope){var nodeData;nodeData=scope.$modelValue,nodeData.items.push({id:10*nodeData.id+nodeData.items.length,title:nodeData.title+"."+(nodeData.items.length+1),items:[]})}}]).controller("MapDemoCtrl",["$scope","$http","$interval",function($scope,$http,$interval){var i,markers;for(markers=[],i=0;8>i;)markers[i]=new google.maps.Marker({title:"Marker: "+i}),i++;$scope.GenerateMapMarkers=function(){var d,lat,lng,loc,numMarkers;for(d=new Date,$scope.date=d.toLocaleString(),numMarkers=Math.floor(4*Math.random())+4,i=0;numMarkers>i;)lat=43.66+Math.random()/100,lng=-79.4103+Math.random()/100,loc=new google.maps.LatLng(lat,lng),markers[i].setPosition(loc),markers[i].setMap($scope.map),i++},$interval($scope.GenerateMapMarkers,2e3)}])}.call(this),function(){"use strict";angular.module("app.ui.directives",[]).directive("uiTime",[function(){return{restrict:"A",link:function(scope,ele){var checkTime,startTime;return startTime=function(){var h,m,s,t,time,today;return today=new Date,h=today.getHours(),m=today.getMinutes(),s=today.getSeconds(),m=checkTime(m),s=checkTime(s),time=h+":"+m+":"+s,ele.html(time),t=setTimeout(startTime,500)},checkTime=function(i){return 10>i&&(i="0"+i),i},startTime()}}}]).directive("uiWeather",[function(){return{restrict:"A",link:function(scope,ele,attrs){var color,icon,skycons;
return color=attrs.color,icon=Skycons[attrs.icon],skycons=new Skycons({color:color,resizeClear:!0}),skycons.add(ele[0],icon),skycons.play()}}}]).directive("uiNotCloseOnClick",[function(){return{restrict:"A",compile:function(ele,attrs){return ele.on("click",function(event){return event.stopPropagation()})}}}]).directive("slimScroll",[function(){return{restrict:"A",link:function(scope,ele,attrs){return ele.slimScroll({height:attrs.scrollHeight||"100%"})}}}])}.call(this),function(){"use strict";angular.module("app.ui.services",[]).factory("logger",[function(){var logIt;return toastr.options={closeButton:!0,positionClass:"toast-bottom-right",timeOut:"3000"},logIt=function(message,type){return toastr[type](message)},{log:function(message){logIt(message,"info")},logWarning:function(message){logIt(message,"warning")},logSuccess:function(message){logIt(message,"success")},logError:function(message){logIt(message,"error")}}}])}.call(this),function(){"use strict";angular.module("app",["ngRoute","ngAnimate","ngResource","hateoas","ui.bootstrap","easypiechart","mgo-angular-wizard","textAngular","ui.tree","ngMap","ngTagsInput","duScroll","ui.tinymce","angular.filter","ngTouch","angular-loading-bar","app.constant","app.controllers","app.directives","app.localization","app.nav","app.ui.ctrls","app.ui.directives","app.ui.services","app.ui.map","app.form.validation","app.ui.form.ctrls","app.ui.form.directives","app.tables","app.task","app.chart.ctrls","app.chart.directives","app.page.ctrls","app.merchants","app.clients","app.client.services","app.handbook.services","app.handbook.sections.services","app.links.services","app.contacts","app.contacts.services","app.handbooks","app.handbook_section","app.handbook_info","app.users","app.users.services","app.businesses","app.businesses.services","app.employee","app.notifications","app.merchants.html","app.maps.directives","ngFileUpload","app.phpjs.services"]).config(["$routeProvider","HateoasInterceptorProvider","HateoasInterfaceProvider","$sceDelegateProvider","$httpProvider",function($routeProvider,HateoasInterceptorProvider,HateoasInterfaceProvider,$sceDelegateProvider,$httpProvider){var routes,setRoutes;return routes=["dashboard","ui/typography","ui/buttons","ui/icons","ui/grids","ui/widgets","ui/components","ui/timeline","ui/nested-lists","ui/pricing-tables","ui/maps","tables/static","tables/dynamic","tables/responsive","forms/elements","forms/layouts","forms/validation","forms/wizard","charts/charts","charts/flot","charts/morris","pages/404","pages/500","pages/blank","pages/forgot-password","pages/invoice","pages/lock-screen","pages/profile","pages/signin","pages/signup","mail/compose","mail/inbox","mail/single","tasks/tasks","merchants/list-merchant","merchants/add","merchants/view","merchants/company","merchants/edit_company","clients/add","clients/view","clients/company","clients/edit_company","clients/create-new-handbook","clients/tab-view","clients/client","clients/client-user","clients/client-handbook","clients/client-policies","clients/client-insurance","clients/client-healthcare","clients/client-notifications","clients/client-imerchant"],setRoutes=function(route){var config,url;return url="/"+route,config={templateUrl:"views/"+route+".html"},$routeProvider.when(url,config),$routeProvider},routes.forEach(function(route){return setRoutes(route)}),$routeProvider.when("/",{redirectTo:"/merchant"}).when("/404",{templateUrl:"views/pages/404.html"}),$routeProvider.when("/merchant",{templateUrl:"views/merchant/merchant.html"}).when("/merchant/:clientId/info",{templateUrl:"views/merchant/merchant-detail_info.html"}).when("/merchant/:clientId/outlets",{templateUrl:"views/merchant/merchant-detail_outlets.html"}).when("/merchant/:clientId/offers",{templateUrl:"views/merchant/merchant-detail_offers.html"}).when("/merchant/:clientId/reports",{templateUrl:"views/merchant/merchant-detail_reports.html"}).when("/merchant/:clientId/campaigns",{templateUrl:"views/merchant/merchant-detail_campaigns.html"}).when("/merchant/:clientId/business",{templateUrl:"views/merchant/merchant-detail_businesses.html"}).when("/merchant/:clientId/business/:businessId",{templateUrl:"views/merchant/merchant-detail_business.html"}).when("/merchant/:clientId/business/:businessId/outlet/:outletId",{templateUrl:"views/merchant/merchant-detail_outlet.html"}).when("/merchant/:clientId/business/:businessId/promotion/:promotionId",{templateUrl:"views/merchant/merchant-detail_promotion.html"}),$routeProvider.when("/clients",{templateUrl:"views/clients/clients.html"}).when("/clients/:clientId",{templateUrl:"views/clients/client-info.html"}).when("/clients/:clientId/info",{templateUrl:"views/clients/client-info.html"}).when("/clients/:clientId/user",{templateUrl:"views/clients/client-user.html"}).when("/clients/:clientId/user/:userId",{templateUrl:"views/clients/user/detail_warp.html"}).when("/clients/:clientId/new-user",{templateUrl:"views/clients/user/detail_new_warp.html"}).when("/clients/:clientId/handbooks",{templateUrl:"views/clients/client-handbook.html"}).when("/clients/:clientId/handbooks/:handbookId",{templateUrl:"views/handbooks/handbook.html"}).when("/clients/:clientId/notifications",{templateUrl:"views/clients/client-notifications.html"}).when("/clients/:clientId/policies",{templateUrl:"views/clients/client-policies.html"}).when("/clients/:clientId/insurance",{templateUrl:"views/clients/client-insurance.html"}).when("/clients/:clientId/healthcare",{templateUrl:"views/clients/client-healthcare.html"}).when("/clients/:clientId/imerchant",{templateUrl:"views/clients/client-imerchant.html"}),$routeProvider.when("/employees",{templateUrl:"views/employee/employee.html"}).otherwise({redirectTo:"/404"}),$sceDelegateProvider.resourceUrlWhitelist(["self","https://api.sg-benefits.com/**"]),$httpProvider.defaults.headers.common={"x-username":"kenneth.yap@ap.magenta-consulting.com","x-password":"p@ssword"}}])}.call(this),function(){angular.module("app.constant",[]).factory("config",function(){return{path:{baseURL:"https://api.sg-benefits.com",clients:"/organisations",client:"/organisations/:org_id",handbooks:"/organisations/:org_id/handbooks",handbook:"/organisations/:org_id/handbooks/:hand_id",sections:"/organisations/:org_id/handbooks/:hand_id/sections",section:"/organisations/:org_id/handbooks/:hand_id/sections/:section_id",section_children:"/organisations/:org_id/handbooks/:hand_id/sections/:section_id/children",section_parent:"/organisations/:org_id/handbooks/:hand_id/sections/parent",contacts:"/organisations/:org_id/positions",contact:"/organisations/:org_id/positions/:position_id",users:"/users",upload:"/api/providers/sonata.media.provider.",businesses:"/organisations/:org_id/businesses"}}})}.call(this),function(){"use strict";angular.module("app.handbook.services",[]).factory("handbookService",function($resource,config){var service;return service=$resource(config.path.baseURL+config.path.handbook,{},{query:{method:"GET"},update:{method:"PUT"},save:{method:"POST",action:config.path.baseURL+config.path.handbooks}})}).factory("fetchHandbook",["$http","$q","$resource",function($http,$q,$resource){return{get:function(url){var d;return d=$q.defer(),$http({method:"GET",url:url}).then(function(res){return d.resolve(res)},function(error){return d.reject(error)}),d.promise},"delete":function(url){var d;return d=$q.defer(),$http({method:"DELETE",url:url}).then(function(res){d.resolve(res)},function(error){d.reject(error)}),d.promise}}}])}.call(this),function(){"use strict";angular.module("app.handbook.sections.services",[]).factory("sectionService",["$resource","config",function($resource,config){var service;return service=$resource(config.path.baseURL+config.path.section,{},{query:{method:"GET",action:config.path.baseURL+config.path.sections},children:{method:"GET",action:config.path.baseURL+config.path.section_children,isArray:!0},parent:{method:"GET",action:config.path.baseURL+config.path.section_parent,isArray:!0},update:{method:"PUT"},save:{method:"POST",action:config.path.baseURL+config.path.sections},saveChild:{method:"POST",action:config.path.baseURL+config.path.sections}})}])}.call(this),function(){"use strict";angular.module("app.links.services",[]).factory("linkServices",["$resource","config",function($resource,config){var service;return service=function(url){return $resource(url,{},{query:{method:"GET",action:url,isArray:!0}})}}])}.call(this),function(){"use strict";angular.module("app.phpjs.services",[]).factory("php",[function(){return{explode:function(delimiter,string,limit){var s;return arguments.length<2||"undefined"==typeof delimiter||"undefined"==typeof string?null:""===delimiter||delimiter===!1||null===delimiter?!1:"function"==typeof delimiter||"object"==typeof delimiter||"function"==typeof string||"object"==typeof string?{0:""}:(delimiter===!0&&(delimiter="1"),delimiter+="",string+="",s=string.split(delimiter),"undefined"==typeof limit?s:(0===limit&&(limit=1),limit>0?limit>=s.length?s:s.slice(0,limit-1).concat([s.slice(limit-1).join(delimiter)]):-limit>=s.length?[]:(s.splice(s.length+limit),s)))},randomString:function(length,chars){var i,mask,result,_i;for(mask="",chars.indexOf("a")>-1&&(mask+="abcdefghijklmnopqrstuvwxyz"),chars.indexOf("A")>-1&&(mask+="ABCDEFGHIJKLMNOPQRSTUVWXYZ"),chars.indexOf("#")>-1&&(mask+="0123456789"),chars.indexOf("!")>-1&&(mask+="~`!@#$%^&*()_+-={}[]:\";'<>?,./|\\"),result="",i=_i=length;0>=length?0>=_i:_i>=0;i=0>=length?++_i:--_i)result+=mask[Math.round(Math.random()*(mask.length-1))];return result},getNOW_TimeStamp:function(){var now;return now=new Date,now.getMonth()+1+"/"+now.getDate()+"/"+now.getFullYear()+" "+now.getHours()+":"+(now.getMinutes()<10?"0"+now.getMinutes():now.getMinutes())+":"+(now.getSeconds()<10?"0"+now.getSeconds():now.getSeconds())},getTimeStamp:function(ndate){var dateAsDateObject;return 1===ndate&&(ndate=getNOW_TimeStamp()),dateAsDateObject=new Date(Date.parse(ndate)),dateAsDateObject.getTime()}}}])}.call(this),function(){"use strict";angular.module("app.nav",[]).directive("toggleNavCollapsedMin",["$rootScope",function($rootScope){return{restrict:"A",link:function(scope,ele,attrs){var app;return app=$("#app"),ele.on("click",function(e){return app.hasClass("nav-collapsed-min")?app.removeClass("nav-collapsed-min"):(app.addClass("nav-collapsed-min"),$rootScope.$broadcast("nav:reset")),e.preventDefault()})}}}]).directive("collapseNav",[function(){return{restrict:"A",link:function(scope,ele,attrs){var $a,$aRest,$app,$lists,$listsRest,$nav,$window,Timer,prevWidth,updateClass;return $window=$(window),$lists=ele.find("ul").parent("li"),$lists.append('<i class="fa fa-caret-down icon-has-ul-h"></i><i class="fa fa-caret-right icon-has-ul"></i>'),$a=$lists.children("a"),$listsRest=ele.children("li").not($lists),$aRest=$listsRest.children("a"),$app=$("#app"),$nav=$("#nav-container"),$a.on("click",function(event){var $parent,$this;return $app.hasClass("nav-collapsed-min")||$nav.hasClass("nav-horizontal")&&$window.width()>=768?!1:($this=$(this),$parent=$this.parent("li"),$lists.not($parent).removeClass("open").find("ul").slideUp(),$parent.toggleClass("open").find("ul").slideToggle(),event.preventDefault())}),$aRest.on("click",function(event){return $lists.removeClass("open").find("ul").slideUp()}),scope.$on("nav:reset",function(event){return $lists.removeClass("open").find("ul").slideUp()}),Timer=void 0,prevWidth=$window.width(),updateClass=function(){var currentWidth;return currentWidth=$window.width(),768>currentWidth&&$app.removeClass("nav-collapsed-min"),768>prevWidth&&currentWidth>=768&&$nav.hasClass("nav-horizontal")&&$lists.removeClass("open").find("ul").slideUp(),prevWidth=currentWidth},$window.resize(function(){var t;return clearTimeout(t),t=setTimeout(updateClass,300)})}}}]).directive("highlightActive",[function(){return{restrict:"A",controller:["$scope","$element","$attrs","$location",function($scope,$element,$attrs,$location){var highlightActive,links,path;return links=$element.find("a"),path=function(){return $location.path()},highlightActive=function(links,path){return path="#"+path,angular.forEach(links,function(link){var $li,$link,href;return $link=angular.element(link),$li=$link.parent("li"),href=$link.attr("href"),$li.hasClass("active")&&$li.removeClass("active"),0===path.indexOf(href)?$li.addClass("active"):void 0})},highlightActive(links,$location.path()),$scope.$watch(path,function(newVal,oldVal){return newVal!==oldVal?highlightActive(links,$location.path()):void 0})}]}}]).directive("toggleOffCanvas",[function(){return{restrict:"A",link:function(scope,ele,attrs){return ele.on("click",function(){return $("#app").toggleClass("on-canvas")})}}}])}.call(this),function(){"use strict";angular.module("app.directives",[]).directive("imgHolder",[function(){return{restrict:"A",link:function(scope,ele,attrs){return Holder.run({images:ele[0]})}}}]).directive("customPage",function(){return{restrict:"A",controller:["$scope","$element","$location",function($scope,$element,$location){var addBg,path;return path=function(){return $location.path()},addBg=function(path){switch($element.removeClass("body-wide body-lock"),path){case"/404":case"/pages/404":case"/pages/500":case"/pages/signin":case"/pages/signup":case"/pages/forgot-password":return $element.addClass("body-wide");case"/pages/lock-screen":return $element.addClass("body-wide body-lock")}},addBg($location.path()),$scope.$watch(path,function(newVal,oldVal){return newVal!==oldVal?addBg($location.path()):void 0})}]}}).directive("uiColorSwitch",[function(){return{restrict:"A",link:function(scope,ele,attrs){return ele.find(".color-option").on("click",function(event){var $this,hrefUrl,style;if($this=$(this),hrefUrl=void 0,style=$this.data("style"),"loulou"===style)hrefUrl="styles/main.css",$('link[href^="styles/main"]').attr("href",hrefUrl);else{if(!style)return!1;style="-"+style,hrefUrl="styles/main"+style+".css",$('link[href^="styles/main"]').attr("href",hrefUrl)}return event.preventDefault()})}}}]).directive("goBack",[function(){return{restrict:"A",controller:["$scope","$element","$window",function($scope,$element,$window){return $element.on("click",function(){return $window.history.back()})}]}}]).directive("tinyeditor",[function(){return{restrict:"AE",link:function(scope,ele,attrs){return tinymce.init({selector:"#"+$(ele).attr("id"),height:300,plugins:["autolink link image lists charmap hr anchor","searchreplace wordcount visualblocks visualchars code fullscreen insertdatetime media nonbreaking","table template textcolor"],menubar:"table tools",toolbar:"styleselect | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image | print preview media fullpage | forecolor backcolor"})}}}]).directive("deleteitem",[function(){return{restrict:"AE",link:function(scope,ele,atts){var $this_e;return $this_e=$(ele),$this_e.on("click",function(){var $a_del,$tr,aconfirm;return $a_del=$(this),$tr=$a_del.closest("tr"),aconfirm=confirm("Are you sure ?"),aconfirm===!0?$tr.remove():void 0})}}}]).directive("deletecontact",[function(){return{restrict:"AE",link:function(scope,ele,atts){var $this_e;return $this_e=$(ele),$this_e.on("click",function(){var $a_del,$tr,aconfirm;return $a_del=$(this),$tr=$a_del.closest(".ctc-content"),aconfirm=confirm("Are you sure ?"),aconfirm===!0?$tr.remove():void 0})}}}])}.call(this),function(){"use strict";angular.module("app.localization",[]).factory("localize",["$http","$rootScope","$window",function($http,$rootScope,$window){var localize;return localize={language:"",url:void 0,resourceFileLoaded:!1,successCallback:function(data){return localize.dictionary=data,localize.resourceFileLoaded=!0,$rootScope.$broadcast("localizeResourcesUpdated")},setLanguage:function(value){return localize.language=value.toLowerCase().split("-")[0],localize.initLocalizedResources()},setUrl:function(value){return localize.url=value,localize.initLocalizedResources()},buildUrl:function(){return localize.language||(localize.language=($window.navigator.userLanguage||$window.navigator.language).toLowerCase(),localize.language=localize.language.split("-")[0]),"i18n/resources-locale_"+localize.language+".js"},initLocalizedResources:function(){var url;return url=localize.url||localize.buildUrl(),$http({method:"GET",url:url,cache:!1}).success(localize.successCallback).error(function(){return $rootScope.$broadcast("localizeResourcesUpdated")})},getLocalizedString:function(value){var result,valueLowerCase;return result=void 0,localize.dictionary&&value?(valueLowerCase=value.toLowerCase(),result=""===localize.dictionary[valueLowerCase]?value:localize.dictionary[valueLowerCase]):result=value,result}}}]).directive("i18n",["localize",function(localize){var i18nDirective;return i18nDirective={restrict:"EA",updateText:function(ele,input,placeholder){var result;return result=void 0,"i18n-placeholder"===input?(result=localize.getLocalizedString(placeholder),ele.attr("placeholder",result)):input.length>=1?(result=localize.getLocalizedString(input),ele.text(result)):void 0},link:function(scope,ele,attrs){return scope.$on("localizeResourcesUpdated",function(){return i18nDirective.updateText(ele,attrs.i18n,attrs.placeholder)}),attrs.$observe("i18n",function(value){return i18nDirective.updateText(ele,value,attrs.placeholder)})}}}]).controller("LangCtrl",["$scope","localize",function($scope,localize){return $scope.lang="English",$scope.setLang=function(lang){switch(lang){case"English":localize.setLanguage("EN-US");break;case"Español":localize.setLanguage("ES-ES");break;case"日本語":localize.setLanguage("JA-JP");break;case"中文":localize.setLanguage("ZH-TW");break;case"Deutsch":localize.setLanguage("DE-DE");break;case"français":localize.setLanguage("FR-FR");break;case"Italiano":localize.setLanguage("IT-IT");break;case"Portugal":localize.setLanguage("PT-BR");break;case"Русский язык":localize.setLanguage("RU-RU");break;case"한국어":localize.setLanguage("KO-KR")}return $scope.lang=lang},$scope.getFlag=function(){var lang;switch(lang=$scope.lang){case"English":return"flags-american";case"Español":return"flags-spain";case"日本語":return"flags-japan";case"中文":return"flags-china";case"Deutsch":return"flags-germany";case"français":return"flags-france";case"Italiano":return"flags-italy";case"Portugal":return"flags-portugal";case"Русский язык":return"flags-russia";case"한국어":return"flags-korea"}}}])}.call(this),function(){"use strict";angular.module("app.controllers",[]).controller("AppCtrl",["$scope","$rootScope","$route","$document",function($scope,$rootScope,$route,$document){var $window;return $window=$(window),$scope.main={brand:"Transform",name:"Lisa Doe"},$scope.admin={layout:"wide",menu:"vertical",fixedHeader:!0,fixedSidebar:!0},$scope.$watch("admin",function(newVal,oldVal){return"horizontal"===newVal.menu&&"vertical"===oldVal.menu?void $rootScope.$broadcast("nav:reset"):newVal.fixedHeader===!1&&newVal.fixedSidebar===!0?(oldVal.fixedHeader===!1&&oldVal.fixedSidebar===!1&&($scope.admin.fixedHeader=!0,$scope.admin.fixedSidebar=!0),void(oldVal.fixedHeader===!0&&oldVal.fixedSidebar===!0&&($scope.admin.fixedHeader=!1,$scope.admin.fixedSidebar=!1))):(newVal.fixedSidebar===!0&&($scope.admin.fixedHeader=!0),void(newVal.fixedHeader===!1&&($scope.admin.fixedSidebar=!1)))},!0),$scope.color={primary:"#1BB7A0",success:"#94B758",info:"#56BDF1",infoAlt:"#7F6EC7",warning:"#F3C536",danger:"#FA7B58"},$rootScope.$on("$routeChangeSuccess",function(event,currentRoute,previousRoute){return $document.scrollTo(0,0)})}]).controller("HeaderCtrl",["$scope",function($scope){return $scope.introOptions={steps:[{element:"#step1",intro:"<strong>Heads up!</strong> You can change the layout here",position:"bottom"},{element:"#step2",intro:"Select a different language",position:"right"},{element:"#step3",intro:"Runnable task App",position:"left"},{element:"#step4",intro:"Collapsed nav for both horizontal nav and vertical nav",position:"right"}]}}]).controller("NavContainerCtrl",["$scope",function($scope){}]).controller("NavCtrl",["$scope","taskStorage","filterFilter",function($scope,taskStorage,filterFilter){var tasks;return tasks=$scope.tasks=taskStorage.get(),$scope.taskRemainingCount=filterFilter(tasks,{completed:!1}).length,$scope.$on("taskRemaining:changed",function(event,count){return $scope.taskRemainingCount=count})}]).controller("DashboardCtrl",["$scope",function($scope){}])}.call(this);
